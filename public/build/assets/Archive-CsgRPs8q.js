import{o as M,c as n,a,t as o,u as t,F as f,r as x,b as h,s as D,h as b,p as T,j,k as F,n as G,m as u,f as l,g,w as L,e as N,l as P}from"./app-CCP2hVtR.js";import{s as I}from"./index-CznJ1WnQ.js";const z={class:"max-w-4xl mx-auto px-4 py-8 sm:py-12"},A={class:"text-3xl font-bold mb-6 text-slate-800 dark:text-slate-200"},E={class:"flex flex-col sm:flex-row gap-4 mb-6"},S={class:"flex gap-2"},U={key:0,class:"space-y-4"},W={key:1,class:"py-16 text-center"},q={class:"text-lg text-slate-500 dark:text-slate-400"},H={key:2,class:"space-y-4"},J={class:"flex items-center justify-between mb-3"},K={class:"flex items-center gap-3"},O={class:"font-mono font-bold text-emerald-600 dark:text-emerald-400 tracking-widest"},Q={class:"text-sm text-slate-400"},R={class:"flex items-center justify-between"},X={class:"flex items-center gap-2"},Y={class:"text-sm text-slate-500 dark:text-slate-400"},Z={class:"font-medium text-slate-800 dark:text-slate-200"},ee={class:"text-sm text-slate-400"},te={key:3,class:"text-center mt-8"},oe={__name:"Archive",setup(ae){const{t:s}=F(),r=u([]),m=u(!0),d=u("all"),p=u(""),v=u(1),k=u(!1),w=G(()=>[{value:"all",label:s("archive.allTime")},{value:"month",label:s("archive.thisMonth")},{value:"week",label:s("archive.thisWeek")}]);let y=null;function $(c){return c?new Date(c).toLocaleDateString():""}function V(){clearTimeout(y),y=setTimeout(()=>{v.value=1,r.value=[],_()},300)}function B(c){d.value=c,v.value=1,r.value=[],_()}async function _(){m.value=!0;try{const c={page:v.value,period:d.value!=="all"?d.value:void 0,player:p.value||void 0},{data:i}=await j.archive.list(c),e=i.games??i.data??[];r.value=v.value===1?e:[...r.value,...e],k.value=i.meta?.has_more??i.next_page_url!=null}catch{}finally{m.value=!1}}function C(){v.value++,_()}return M(_),(c,i)=>(l(),n("div",z,[a("h1",A,o(t(s)("archive.title")),1),a("div",E,[a("div",S,[(l(!0),n(f,null,x(w.value,e=>(l(),g(t(b),{key:e.value,label:e.label,severity:d.value===e.value?"success":"secondary",variant:d.value===e.value?void 0:"outlined",size:"small",onClick:se=>B(e.value)},null,8,["label","severity","variant","onClick"]))),128))]),h(t(D),{modelValue:p.value,"onUpdate:modelValue":i[0]||(i[0]=e=>p.value=e),placeholder:t(s)("archive.filterByPlayer"),class:"sm:ml-auto w-full sm:w-60",onInput:V},null,8,["modelValue","placeholder"])]),m.value&&r.value.length===0?(l(),n("div",U,[(l(),n(f,null,x(4,e=>h(t(I),{key:e,height:"6rem"})),64))])):r.value.length===0?(l(),n("div",W,[a("p",q,o(t(s)("archive.noGames")),1)])):(l(),n("div",H,[(l(!0),n(f,null,x(r.value,e=>(l(),g(t(P),{key:e.code,href:`/arkiv/${e.code}`,class:"block p-5 rounded-2xl bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-800 hover:border-emerald-300 dark:hover:border-emerald-700 transition-colors"},{default:L(()=>[a("div",J,[a("div",K,[a("span",O,"#"+o(e.code),1),a("span",Q,o($(e.finished_at)),1)]),h(t(N),{value:`${e.player_count} ${t(s)("games.players")}`},null,8,["value"])]),a("div",R,[a("div",X,[a("span",Y,o(t(s)("game.winner"))+":",1),a("span",Z,o(e.winner_nickname||t(s)("game.tie")),1)]),a("span",ee,o(e.rounds_count)+" "+o(t(s)("games.rounds")),1)])]),_:2},1032,["href"]))),128))])),k.value?(l(),n("div",te,[h(t(b),{label:t(s)("archive.loadMore"),severity:"secondary",variant:"outlined",loading:m.value,onClick:C},null,8,["label","loading"])])):T("",!0)]))}};export{oe as default};
