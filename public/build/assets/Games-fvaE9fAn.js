import{o as S,Z as G,c as n,q as w,a as e,t as l,u as s,p as v,b as x,x as k,h as C,F as V,r as j,y as M,s as H,m as u,j as A,k as L,f as r,g as b,e as p,w as z,d as h}from"./app-CCP2hVtR.js";import{s as U}from"./index-CznJ1WnQ.js";const F={class:"max-w-4xl mx-auto px-4 py-8 sm:py-12"},Z={class:"text-3xl font-bold mb-8 text-slate-800 dark:text-slate-200"},q={key:1,class:"mb-6 p-4 rounded-xl bg-emerald-50 dark:bg-emerald-950/50 border border-emerald-300 dark:border-emerald-700 flex items-center justify-between"},D={class:"font-medium text-emerald-700 dark:text-emerald-300"},E={class:"text-sm text-emerald-600 dark:text-emerald-400"},J={key:2,class:"mb-8"},R={class:"text-lg font-semibold mb-3 text-slate-800 dark:text-slate-200"},T={class:"space-y-3"},K=["onClick"],O={class:"flex items-center justify-between gap-2"},P={class:"flex items-center gap-2 min-w-0"},Q={class:"font-mono font-bold text-emerald-600 dark:text-emerald-400 tracking-widest shrink-0"},W={class:"text-sm text-slate-500 dark:text-slate-400 truncate"},X={class:"flex items-center gap-1.5 shrink-0"},Y={key:0,class:"inline-flex items-center justify-center w-5 h-5 rounded-full bg-amber-100 dark:bg-amber-900/50 text-amber-700 dark:text-amber-300"},ee={class:"inline-flex items-center gap-1"},te={class:"inline-flex items-center gap-0.5 text-xs font-medium text-slate-500 dark:text-slate-400"},se={class:"mb-8"},ae={class:"text-lg font-semibold mb-3 text-slate-800 dark:text-slate-200"},le={key:0,class:"space-y-3"},re={key:1,class:"p-8 rounded-2xl bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-800 text-center"},oe={class:"text-slate-500 dark:text-slate-400"},ne={key:2,class:"space-y-3"},de=["onClick"],ie={class:"flex items-center justify-between gap-2"},ce={class:"flex items-center gap-2 min-w-0"},ue={class:"font-mono font-bold text-emerald-600 dark:text-emerald-400 tracking-widest shrink-0"},me={class:"text-sm text-slate-500 dark:text-slate-400 truncate"},ve={class:"flex items-center gap-1.5 shrink-0"},be={key:0,class:"inline-flex items-center justify-center w-5 h-5 rounded-full bg-amber-100 dark:bg-amber-900/50 text-amber-700 dark:text-amber-300"},pe={class:"inline-flex items-center gap-1"},xe={class:"inline-flex items-center gap-0.5 text-xs font-medium text-slate-500 dark:text-slate-400"},ke={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},fe={__name:"Games",setup(ge){const{t:o}=L(),_=u([]),g=u([]),$=u(!0),d=u(""),m=u(null),f=u(null),i=u(null);async function B(){try{const{data:c}=await A.games.list();_.value=c.games??c.data??[],g.value=c.my_games??[];const a=g.value.find(t=>t.status!=="lobby");a&&!i.value&&(i.value=a)}catch{}finally{$.value=!1}}function I(){d.value.length<4||k.visit(`/spill/${d.value}/se`)}let y=null;return S(()=>{const c=sessionStorage.getItem("select-kicked");c&&(m.value=c,f.value=sessionStorage.getItem("select-banned-reason"),sessionStorage.removeItem("select-kicked"),sessionStorage.removeItem("select-banned-reason")),B(),y=setInterval(B,1e4)}),G(()=>{y&&clearInterval(y)}),(c,a)=>(r(),n("div",F,[m.value?(r(),n("div",{key:0,class:w(["mb-6 p-4 rounded-xl border text-center",m.value==="banned"?"bg-red-50 dark:bg-red-950/50 border-red-300 dark:border-red-700":"bg-amber-50 dark:bg-amber-950/50 border-amber-300 dark:border-amber-700"])},[e("p",{class:w(["font-medium",m.value==="banned"?"text-red-700 dark:text-red-300":"text-amber-700 dark:text-amber-300"])},l(m.value==="banned"?s(o)("lobby.bannedNotification"):s(o)("lobby.kickedNotification")),3),f.value?(r(),n("p",{key:0,class:w(["text-sm mt-1",m.value==="banned"?"text-red-600 dark:text-red-400":""])},l(f.value),3)):v("",!0)],2)):v("",!0),e("h1",Z,l(s(o)("games.title")),1),i.value?(r(),n("div",q,[e("div",null,[e("p",D,l(s(o)("games.gameStarted")),1),e("p",E," #"+l(i.value.code)+" â€” "+l(s(o)("game.round"))+" "+l(i.value.current_round)+"/"+l(i.value.total_rounds),1)]),x(s(C),{label:s(o)("games.rejoin"),severity:"success",size:"small",onClick:a[0]||(a[0]=t=>s(k).visit(`/spill/${i.value.code}`))},null,8,["label"])])):v("",!0),g.value.length>0?(r(),n("div",J,[e("h2",R,l(s(o)("games.myGames")),1),e("div",T,[(r(!0),n(V,null,j(g.value,t=>(r(),n("div",{key:t.code,class:"p-4 rounded-xl bg-emerald-50 dark:bg-emerald-950/30 border border-emerald-200 dark:border-emerald-800 hover:border-emerald-400 dark:hover:border-emerald-600 transition-colors cursor-pointer",onClick:N=>s(k).visit(`/spill/${t.code}`)},[e("div",O,[e("div",P,[e("span",Q," #"+l(t.code),1),e("span",W,l(t.host_nickname),1)]),e("div",X,[t.has_password?(r(),n("span",Y,[...a[4]||(a[4]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"w-3 h-3"},[e("path",{"fill-rule":"evenodd",d:"M10 1a4.5 4.5 0 00-4.5 4.5V9H5a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002-2v-6a2 2 0 00-2-2h-.5V5.5A4.5 4.5 0 0010 1zm3 8V5.5a3 3 0 10-6 0V9h6z","clip-rule":"evenodd"})],-1)])])):v("",!0),t.status==="voting"?(r(),b(s(p),{key:1,value:s(o)("games.statusVoting"),severity:"warn"},null,8,["value"])):t.status&&t.status!=="lobby"?(r(),b(s(p),{key:2,severity:"info"},{default:z(()=>[e("span",ee,[a[5]||(a[5]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-3 h-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"},[e("polyline",{points:"4 17 10 11 4 5"}),e("line",{x1:"12",y1:"19",x2:"20",y2:"19"})],-1)),h(" "+l(t.current_round)+"/"+l(t.total_rounds),1)])]),_:2},1024)):(r(),b(s(p),{key:3,value:s(o)("games.statusLobby"),severity:"success"},null,8,["value"])),e("span",te,[a[6]||(a[6]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-3.5 h-3.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e("circle",{cx:"12",cy:"7",r:"4"})],-1)),h(" "+l(t.player_count)+"/"+l(t.max_players??8),1)])])])],8,K))),128))])])):v("",!0),e("div",se,[e("h2",ae,l(s(o)("games.availableGames")),1),$.value?(r(),n("div",le,[(r(),n(V,null,j(3,t=>x(s(U),{key:t,height:"4rem"})),64))])):_.value.length===0?(r(),n("div",re,[e("p",oe,l(s(o)("games.noGames")),1)])):(r(),n("div",ne,[(r(!0),n(V,null,j(_.value,t=>(r(),n("div",{key:t.code,class:"p-4 rounded-xl bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-800 hover:border-emerald-300 dark:hover:border-emerald-700 transition-colors cursor-pointer",onClick:N=>s(k).visit(`/spill/${t.code}/se`)},[e("div",ie,[e("div",ce,[e("span",ue," #"+l(t.code),1),e("span",me,l(t.host_nickname),1)]),e("div",ve,[t.has_password?(r(),n("span",be,[...a[7]||(a[7]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"w-3 h-3"},[e("path",{"fill-rule":"evenodd",d:"M10 1a4.5 4.5 0 00-4.5 4.5V9H5a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002-2v-6a2 2 0 00-2-2h-.5V5.5A4.5 4.5 0 0010 1zm3 8V5.5a3 3 0 10-6 0V9h6z","clip-rule":"evenodd"})],-1)])])):v("",!0),t.status==="voting"?(r(),b(s(p),{key:1,value:s(o)("games.statusVoting"),severity:"warn"},null,8,["value"])):t.status&&t.status!=="lobby"?(r(),b(s(p),{key:2,severity:"info"},{default:z(()=>[e("span",pe,[a[8]||(a[8]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-3 h-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"},[e("polyline",{points:"4 17 10 11 4 5"}),e("line",{x1:"12",y1:"19",x2:"20",y2:"19"})],-1)),h(" "+l(t.current_round)+"/"+l(t.total_rounds),1)])]),_:2},1024)):(r(),b(s(p),{key:3,value:s(o)("games.statusLobby"),severity:"success"},null,8,["value"])),e("span",xe,[a[9]||(a[9]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-3.5 h-3.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e("circle",{cx:"12",cy:"7",r:"4"})],-1)),h(" "+l(t.player_count)+"/"+l(t.max_players??8),1)])])])],8,de))),128))]))]),e("div",ke,[x(s(C),{label:s(o)("games.create"),severity:"success",size:"large",class:"w-full",onClick:a[1]||(a[1]=t=>s(k).visit("/spill/opprett"))},null,8,["label"]),e("form",{onSubmit:M(I,["prevent"]),class:"flex gap-2 items-center"},[x(s(H),{modelValue:d.value,"onUpdate:modelValue":a[2]||(a[2]=t=>d.value=t),placeholder:s(o)("games.code"),maxlength:"6",size:"large",class:"flex-1 min-w-0 text-center uppercase tracking-[0.2em] font-mono",onInput:a[3]||(a[3]=t=>d.value=d.value.toUpperCase().replace(/[^A-Z0-9]/g,""))},null,8,["modelValue","placeholder"]),x(s(C),{type:"submit",label:s(o)("games.join"),severity:"success",size:"large",disabled:d.value.length<4},null,8,["label","disabled"])],32)])]))}};export{fe as default};
