import{o as g,c as m,a as l,t as r,u as t,p as h,b as c,s as b,h as k,y,w,d as V,l as C,m as n,k as S,f as p,x as I}from"./app-CCP2hVtR.js";import{u as j}from"./gameStore-C6TK5yyB.js";const B={class:"max-w-md mx-auto px-4 py-12 sm:py-20 text-center"},N={class:"text-3xl font-bold mb-4 text-slate-800 dark:text-slate-200"},U={class:"text-sm text-slate-500 dark:text-slate-400 mb-8"},G={key:0,class:"p-3 rounded-lg bg-red-50 dark:bg-red-950/50 border border-red-200 dark:border-red-900 text-sm text-red-700 dark:text-red-300"},$={class:"flex justify-center gap-2"},A={class:"mt-8"},Z={__name:"JoinGame",setup(J){const x=j(),{t:a}=S(),e=n(""),d=n(!1),o=n(""),u=n(null);function f(){e.value=e.value.toUpperCase().replace(/[^A-Z0-9]/g,"")}async function _(){if(!(e.value.length<4)){d.value=!0,o.value="";try{await x.joinGame(e.value),I.visit(`/spill/${e.value}`)}catch(s){o.value=s.response?.data?.message||a("common.error")}finally{d.value=!1}}}return g(()=>{const s=new URLSearchParams(window.location.search);s.get("code")&&(e.value=String(s.get("code")).toUpperCase().slice(0,6).replace(/[^A-Z0-9]/g,"")),u.value?.$el?.focus?.()}),(s,i)=>(p(),m("div",B,[l("h1",N,r(t(a)("games.joinByCode")),1),l("p",U,r(t(a)("games.enterCode")),1),l("form",{onSubmit:y(_,["prevent"]),class:"space-y-6"},[o.value?(p(),m("div",G,r(o.value),1)):h("",!0),l("div",$,[c(t(b),{ref_key:"codeInput",ref:u,modelValue:e.value,"onUpdate:modelValue":i[0]||(i[0]=v=>e.value=v),maxlength:"6",class:"text-center text-3xl sm:text-4xl tracking-[0.4em] font-mono font-bold uppercase w-full max-w-xs",placeholder:"______",onInput:f},null,8,["modelValue"])]),c(t(k),{type:"submit",label:t(a)("games.join"),severity:"success",size:"large",disabled:e.value.length<4,loading:d.value,class:"w-full max-w-xs"},null,8,["label","disabled","loading"])],32),l("p",A,[c(t(C),{href:"/spill",class:"text-sm text-emerald-600 dark:text-emerald-400 hover:underline"},{default:w(()=>[V(r(t(a)("common.back")),1)]),_:1})])]))}};export{Z as default};
