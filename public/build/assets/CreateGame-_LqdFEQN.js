import{v as V,c as x,a as l,t as a,u as t,p as b,b as r,s as v,h as u,x as f,y as h,k as C,m as y,z as U,f as _}from"./app-CCP2hVtR.js";import{s as n}from"./index-GviPdmbS.js";import{s as k}from"./index-UD0nC4Og.js";import{u as $}from"./gameStore-C6TK5yyB.js";const S={class:"max-w-2xl mx-auto px-4 py-8 sm:py-12"},E={class:"text-3xl font-bold mb-8 text-slate-800 dark:text-slate-200"},B={key:0,class:"p-3 rounded-lg bg-red-50 dark:bg-red-950/50 border border-red-200 dark:border-red-900 text-sm text-red-700 dark:text-red-300"},D={class:"p-6 rounded-2xl bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-800 space-y-5"},I={class:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2 block"},z={class:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2 block"},G={class:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2 block"},N={class:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2 block"},j={class:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-1 block"},A={class:"text-xs text-slate-400 mb-2"},L={class:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-1 block"},T={class:"text-xs text-slate-400 mb-2"},Z={class:"flex items-center justify-between"},M={for:"readyCheck",class:"text-sm font-medium text-slate-700 dark:text-slate-300 cursor-pointer"},P={class:"text-xs text-slate-400"},Q={class:"flex items-center justify-between"},R={for:"chatEnabled",class:"text-sm font-medium text-slate-700 dark:text-slate-300 cursor-pointer"},X={class:"p-6 rounded-2xl bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-800 space-y-5"},q={class:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2 block"},F={class:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2 block"},H={class:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2 block"},J={class:"p-6 rounded-2xl bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-800 space-y-4"},K={class:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2 block"},O={class:"flex gap-3"},W={key:0,class:"flex flex-col gap-2"},Y={class:"text-sm font-medium text-slate-700 dark:text-slate-300"},ee={class:"flex gap-3"},de={__name:"CreateGame",setup(te){const p=$();V();const{t:d}=C(),e=U({rounds:8,answer_time:60,vote_time:30,time_between_rounds:30,acronym_length:5,max_players:8,excluded_letters:"",is_private:!1,password:"",chat_enabled:!0,allow_ready_check:!0,max_edits:0,max_vote_changes:0}),c=y(!1),i=y("");async function g(){c.value=!0,i.value="";try{const m={rounds:e.rounds,answer_time:e.answer_time,vote_time:e.vote_time,time_between_rounds:e.time_between_rounds,acronym_length_min:e.acronym_length,acronym_length_max:e.acronym_length,max_players:e.max_players,chat_enabled:e.chat_enabled,allow_ready_check:e.allow_ready_check,max_edits:e.max_edits,max_vote_changes:e.max_vote_changes};e.excluded_letters&&(m.excluded_letters=e.excluded_letters);const s={settings:m,is_public:!e.is_private};e.is_private&&e.password&&(s.password=e.password);const w=(await p.createGame(s)).game?.code||p.gameCode;f.visit(`/spill/${w}`)}catch(m){i.value=m.response?.data?.message||d("common.error")}finally{c.value=!1}}return(m,s)=>(_(),x("div",S,[l("h1",E,a(t(d)("create.title")),1),l("form",{onSubmit:h(g,["prevent"]),class:"space-y-6"},[i.value?(_(),x("div",B,a(i.value),1)):b("",!0),l("div",D,[l("div",null,[l("label",I,a(t(d)("create.rounds"))+": "+a(e.rounds),1),r(t(n),{modelValue:e.rounds,"onUpdate:modelValue":s[0]||(s[0]=o=>e.rounds=o),min:1,max:20,step:1,class:"w-full px-3"},null,8,["modelValue"])]),l("div",null,[l("label",z,a(t(d)("create.answerTime"))+": "+a(e.answer_time)+" "+a(t(d)("create.seconds")),1),r(t(n),{modelValue:e.answer_time,"onUpdate:modelValue":s[1]||(s[1]=o=>e.answer_time=o),min:15,max:180,step:5,class:"w-full px-3"},null,8,["modelValue"])]),l("div",null,[l("label",G,a(t(d)("create.voteTime"))+": "+a(e.vote_time)+" "+a(t(d)("create.seconds")),1),r(t(n),{modelValue:e.vote_time,"onUpdate:modelValue":s[2]||(s[2]=o=>e.vote_time=o),min:10,max:120,step:5,class:"w-full px-3"},null,8,["modelValue"])]),l("div",null,[l("label",N,a(t(d)("create.timeBetweenRounds"))+": "+a(e.time_between_rounds)+" "+a(t(d)("create.seconds")),1),r(t(n),{modelValue:e.time_between_rounds,"onUpdate:modelValue":s[3]||(s[3]=o=>e.time_between_rounds=o),min:3,max:120,step:1,class:"w-full px-3"},null,8,["modelValue"])]),l("div",null,[l("label",j,a(t(d)("create.maxEdits"))+": "+a(e.max_edits===0?t(d)("create.unlimited"):e.max_edits),1),l("p",A,a(t(d)("create.maxEditsDesc")),1),r(t(n),{modelValue:e.max_edits,"onUpdate:modelValue":s[4]||(s[4]=o=>e.max_edits=o),min:0,max:10,step:1,class:"w-full px-3"},null,8,["modelValue"])]),l("div",null,[l("label",L,a(t(d)("create.maxVoteChanges"))+": "+a(e.max_vote_changes===0?t(d)("create.unlimited"):e.max_vote_changes),1),l("p",T,a(t(d)("create.maxVoteChangesDesc")),1),r(t(n),{modelValue:e.max_vote_changes,"onUpdate:modelValue":s[5]||(s[5]=o=>e.max_vote_changes=o),min:0,max:10,step:1,class:"w-full px-3"},null,8,["modelValue"])]),l("div",Z,[l("div",null,[l("label",M,a(t(d)("create.readyCheck")),1),l("p",P,a(t(d)("create.readyCheckDesc")),1)]),r(t(k),{modelValue:e.allow_ready_check,"onUpdate:modelValue":s[6]||(s[6]=o=>e.allow_ready_check=o),inputId:"readyCheck"},null,8,["modelValue"])]),l("div",Q,[l("label",R,a(t(d)("create.chat")),1),r(t(k),{modelValue:e.chat_enabled,"onUpdate:modelValue":s[7]||(s[7]=o=>e.chat_enabled=o),inputId:"chatEnabled"},null,8,["modelValue"])])]),l("div",X,[l("div",null,[l("label",q,a(t(d)("create.acronymLength"))+": "+a(e.acronym_length),1),r(t(n),{modelValue:e.acronym_length,"onUpdate:modelValue":s[8]||(s[8]=o=>e.acronym_length=o),min:1,max:6,step:1,class:"w-full px-3"},null,8,["modelValue"])]),l("div",null,[l("label",F,a(t(d)("create.maxPlayers"))+": "+a(e.max_players),1),r(t(n),{modelValue:e.max_players,"onUpdate:modelValue":s[9]||(s[9]=o=>e.max_players=o),min:2,max:16,step:1,class:"w-full px-3"},null,8,["modelValue"])]),l("div",null,[l("label",H,a(t(d)("create.excludeLetters")),1),r(t(v),{modelValue:e.excluded_letters,"onUpdate:modelValue":s[10]||(s[10]=o=>e.excluded_letters=o),class:"w-full uppercase tracking-[0.2em] font-mono",placeholder:"XZQ",onInput:s[11]||(s[11]=o=>e.excluded_letters=e.excluded_letters.toUpperCase().replace(/[^A-Z]/g,""))},null,8,["modelValue"])])]),l("div",J,[l("div",null,[l("label",K,a(t(d)("create.visibility")),1),l("div",O,[r(t(u),{label:t(d)("create.public"),severity:e.is_private?"secondary":"success",variant:e.is_private?"outlined":void 0,size:"small",onClick:s[12]||(s[12]=o=>e.is_private=!1)},null,8,["label","severity","variant"]),r(t(u),{label:t(d)("create.private"),severity:e.is_private?"success":"secondary",variant:e.is_private?void 0:"outlined",size:"small",onClick:s[13]||(s[13]=o=>e.is_private=!0)},null,8,["label","severity","variant"])])]),e.is_private?(_(),x("div",W,[l("label",Y,a(t(d)("create.password")),1),r(t(v),{modelValue:e.password,"onUpdate:modelValue":s[14]||(s[14]=o=>e.password=o),type:"text",class:"w-full"},null,8,["modelValue"])])):b("",!0)]),l("div",ee,[r(t(u),{label:t(d)("common.back"),severity:"secondary",variant:"outlined",class:"flex-1",onClick:s[15]||(s[15]=o=>t(f).visit("/spill"))},null,8,["label"]),r(t(u),{type:"submit",label:t(d)("create.submit"),severity:"success",loading:c.value,class:"flex-1"},null,8,["label","loading"])])],32)]))}};export{de as default};
