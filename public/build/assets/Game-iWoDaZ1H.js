import{B as ta,A as aa,R as sa,C as na,D as la,_ as ra,Y as oa,E as ia,G as da,H as ca,K as ct,I as ua,W as ma,J as Xe,S as va,L as fa,M as pa,f as m,g as ce,w as te,b as y,T as ha,N as Ye,O as ft,c as v,P as ut,p as M,v as ba,Q as ya,U as xa,V as fe,X as pe,o as ga,Z as ka,a as t,u as e,t as r,h as I,F as P,q as W,d as q,r as oe,y as he,$ as wa,a0 as _a,e as et,a1 as Ca,x as ie,s as _e,i as Ue,a2 as Ma,m as x,n as D,a3 as La,k as Ra,j as Va,z as Sa}from"./app-CCP2hVtR.js";import{s as mt,_ as Ea,u as Ta}from"./useGameAnimations-BVktlYM7.js";import{O as Ke,C as Aa}from"./index-CdoIoPxA.js";import{s as de}from"./index-GviPdmbS.js";import{s as vt}from"./index-UD0nC4Og.js";import{s as Ia}from"./index-BxUleAd_.js";import{u as za}from"./gameStore-C6TK5yyB.js";var Ba=`
    .p-popover {
        margin-block-start: dt('popover.gutter');
        background: dt('popover.background');
        color: dt('popover.color');
        border: 1px solid dt('popover.border.color');
        border-radius: dt('popover.border.radius');
        box-shadow: dt('popover.shadow');
        will-change: transform;
    }

    .p-popover-content {
        padding: dt('popover.content.padding');
    }

    .p-popover-flipped {
        margin-block-start: calc(dt('popover.gutter') * -1);
        margin-block-end: dt('popover.gutter');
    }

    .p-popover:after,
    .p-popover:before {
        bottom: 100%;
        left: calc(dt('popover.arrow.offset') + dt('popover.arrow.left'));
        content: ' ';
        height: 0;
        width: 0;
        position: absolute;
        pointer-events: none;
    }

    .p-popover:after {
        border-width: calc(dt('popover.gutter') - 2px);
        margin-left: calc(-1 * (dt('popover.gutter') - 2px));
        border-style: solid;
        border-color: transparent;
        border-bottom-color: dt('popover.background');
    }

    .p-popover:before {
        border-width: dt('popover.gutter');
        margin-left: calc(-1 * dt('popover.gutter'));
        border-style: solid;
        border-color: transparent;
        border-bottom-color: dt('popover.border.color');
    }

    .p-popover-flipped:after,
    .p-popover-flipped:before {
        bottom: auto;
        top: 100%;
    }

    .p-popover.p-popover-flipped:after {
        border-bottom-color: transparent;
        border-top-color: dt('popover.background');
    }

    .p-popover.p-popover-flipped:before {
        border-bottom-color: transparent;
        border-top-color: dt('popover.border.color');
    }
`,Ga={root:"p-popover p-component",content:"p-popover-content"},Pa=ta.extend({name:"popover",style:Ba,classes:Ga}),Oa={name:"BasePopover",extends:la,props:{dismissable:{type:Boolean,default:!0},appendTo:{type:[String,Object],default:"body"},baseZIndex:{type:Number,default:0},autoZIndex:{type:Boolean,default:!0},breakpoints:{type:Object,default:null},closeOnEscape:{type:Boolean,default:!0}},style:Pa,provide:function(){return{$pcPopover:this,$parentInstance:this}}},tt={name:"Popover",extends:Oa,inheritAttrs:!1,emits:["show","hide"],data:function(){return{visible:!1}},watch:{dismissable:{immediate:!0,handler:function(c){c?this.bindOutsideClickListener():this.unbindOutsideClickListener()}}},selfClick:!1,target:null,eventTarget:null,outsideClickListener:null,scrollHandler:null,resizeListener:null,container:null,styleElement:null,overlayEventListener:null,documentKeydownListener:null,beforeUnmount:function(){this.dismissable&&this.unbindOutsideClickListener(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.destroyStyle(),this.unbindResizeListener(),this.target=null,this.container&&this.autoZIndex&&Xe.clear(this.container),this.overlayEventListener&&(Ke.off("overlay-click",this.overlayEventListener),this.overlayEventListener=null),this.container=null},mounted:function(){this.breakpoints&&this.createStyle()},methods:{toggle:function(c,s){this.visible?this.hide():this.show(c,s)},show:function(c,s){this.visible=!0,this.eventTarget=c.currentTarget,this.target=s||c.currentTarget},hide:function(){this.visible=!1},onContentClick:function(){this.selfClick=!0},onEnter:function(c){var s=this;va(c,{position:"absolute",top:"0"}),this.alignOverlay(),this.dismissable&&this.bindOutsideClickListener(),this.bindScrollListener(),this.bindResizeListener(),this.autoZIndex&&Xe.set("overlay",c,this.baseZIndex+this.$primevue.config.zIndex.overlay),this.overlayEventListener=function(G){s.container.contains(G.target)&&(s.selfClick=!0)},this.focus(),Ke.on("overlay-click",this.overlayEventListener),this.$emit("show"),this.closeOnEscape&&this.bindDocumentKeyDownListener()},onLeave:function(){this.unbindOutsideClickListener(),this.unbindScrollListener(),this.unbindResizeListener(),this.unbindDocumentKeyDownListener(),Ke.off("overlay-click",this.overlayEventListener),this.overlayEventListener=null,this.$emit("hide")},onAfterLeave:function(c){this.autoZIndex&&Xe.clear(c)},alignOverlay:function(){ca(this.container,this.target,!1);var c=ct(this.container),s=ct(this.target),G=0;c.left<s.left&&(G=s.left-c.left),this.container.style.setProperty(ua("popover.arrow.left").name,"".concat(G,"px")),c.top<s.top&&(this.container.setAttribute("data-p-popover-flipped","true"),!this.isUnstyled&&ma(this.container,"p-popover-flipped"))},onContentKeydown:function(c){c.code==="Escape"&&this.closeOnEscape&&(this.hide(),da(this.target))},onButtonKeydown:function(c){switch(c.code){case"ArrowDown":case"ArrowUp":case"ArrowLeft":case"ArrowRight":c.preventDefault()}},focus:function(){var c=this.container.querySelector("[autofocus]");c&&c.focus()},onKeyDown:function(c){c.code==="Escape"&&this.closeOnEscape&&(this.visible=!1)},bindDocumentKeyDownListener:function(){this.documentKeydownListener||(this.documentKeydownListener=this.onKeyDown.bind(this),window.document.addEventListener("keydown",this.documentKeydownListener))},unbindDocumentKeyDownListener:function(){this.documentKeydownListener&&(window.document.removeEventListener("keydown",this.documentKeydownListener),this.documentKeydownListener=null)},bindOutsideClickListener:function(){var c=this;!this.outsideClickListener&&ia()&&(this.outsideClickListener=function(s){c.visible&&!c.selfClick&&!c.isTargetClicked(s)&&(c.visible=!1),c.selfClick=!1},document.addEventListener("click",this.outsideClickListener))},unbindOutsideClickListener:function(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener),this.outsideClickListener=null,this.selfClick=!1)},bindScrollListener:function(){var c=this;this.scrollHandler||(this.scrollHandler=new Aa(this.target,function(){c.visible&&(c.visible=!1)})),this.scrollHandler.bindScrollListener()},unbindScrollListener:function(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()},bindResizeListener:function(){var c=this;this.resizeListener||(this.resizeListener=function(){c.visible&&!oa()&&(c.visible=!1)},window.addEventListener("resize",this.resizeListener))},unbindResizeListener:function(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)},isTargetClicked:function(c){return this.eventTarget&&(this.eventTarget===c.target||this.eventTarget.contains(c.target))},containerRef:function(c){this.container=c},createStyle:function(){if(!this.styleElement&&!this.isUnstyled){var c;this.styleElement=document.createElement("style"),this.styleElement.type="text/css",ra(this.styleElement,"nonce",(c=this.$primevue)===null||c===void 0||(c=c.config)===null||c===void 0||(c=c.csp)===null||c===void 0?void 0:c.nonce),document.head.appendChild(this.styleElement);var s="";for(var G in this.breakpoints)s+=`
                        @media screen and (max-width: `.concat(G,`) {
                            .p-popover[`).concat(this.$attrSelector,`] {
                                width: `).concat(this.breakpoints[G],` !important;
                            }
                        }
                    `);this.styleElement.innerHTML=s}},destroyStyle:function(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)},onOverlayClick:function(c){Ke.emit("overlay-click",{originalEvent:c,target:this.target})}},directives:{focustrap:na,ripple:sa},components:{Portal:aa}},Da=["aria-modal"];function Fa(g,c,s,G,n,T){var ae=fa("Portal"),Ce=pa("focustrap");return m(),ce(ae,{appendTo:g.appendTo},{default:te(function(){return[y(ha,Ye({name:"p-anchored-overlay",onEnter:T.onEnter,onLeave:T.onLeave,onAfterLeave:T.onAfterLeave},g.ptm("transition")),{default:te(function(){return[n.visible?ft((m(),v("div",Ye({key:0,ref:T.containerRef,role:"dialog","aria-modal":n.visible,onClick:c[3]||(c[3]=function(){return T.onOverlayClick&&T.onOverlayClick.apply(T,arguments)}),class:g.cx("root")},g.ptmi("root")),[g.$slots.container?ut(g.$slots,"container",{key:0,closeCallback:T.hide,keydownCallback:function(se){return T.onButtonKeydown(se)}}):(m(),v("div",Ye({key:1,class:g.cx("content"),onClick:c[0]||(c[0]=function(){return T.onContentClick&&T.onContentClick.apply(T,arguments)}),onMousedown:c[1]||(c[1]=function(){return T.onContentClick&&T.onContentClick.apply(T,arguments)}),onKeydown:c[2]||(c[2]=function(){return T.onContentKeydown&&T.onContentKeydown.apply(T,arguments)})},g.ptm("content")),[ut(g.$slots,"default")],16))],16,Da)),[[Ce]]):M("",!0)]}),_:3},16,["onEnter","onLeave","onAfterLeave"])]}),_:3},8,["appendTo"])}tt.render=Fa;var at={};(function g(c,s,G,n){var T=!!(c.Worker&&c.Blob&&c.Promise&&c.OffscreenCanvas&&c.OffscreenCanvasRenderingContext2D&&c.HTMLCanvasElement&&c.HTMLCanvasElement.prototype.transferControlToOffscreen&&c.URL&&c.URL.createObjectURL),ae=typeof Path2D=="function"&&typeof DOMMatrix=="function",Ce=(function(){if(!c.OffscreenCanvas)return!1;try{var o=new OffscreenCanvas(1,1),a=o.getContext("2d");a.fillRect(0,0,1,1);var f=o.transferToImageBitmap();a.createPattern(f,"no-repeat")}catch{return!1}return!0})();function be(){}function se(o){var a=s.exports.Promise,f=a!==void 0?a:c.Promise;return typeof f=="function"?new f(o):(o(be,be),null)}var ue=(function(o,a){return{transform:function(f){if(o)return f;if(a.has(f))return a.get(f);var b=new OffscreenCanvas(f.width,f.height),k=b.getContext("2d");return k.drawImage(f,0,0),a.set(f,b),b},clear:function(){a.clear()}}})(Ce,new Map),Me=(function(){var o=Math.floor(16.666666666666668),a,f,b={},k=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(a=function(p){var _=Math.random();return b[_]=requestAnimationFrame(function h(w){k===w||k+o-1<w?(k=w,delete b[_],p()):b[_]=requestAnimationFrame(h)}),_},f=function(p){b[p]&&cancelAnimationFrame(b[p])}):(a=function(p){return setTimeout(p,o)},f=function(p){return clearTimeout(p)}),{frame:a,cancel:f}})(),F=(function(){var o,a,f={};function b(k){function p(_,h){k.postMessage({options:_||{},callback:h})}k.init=function(h){var w=h.transferControlToOffscreen();k.postMessage({canvas:w},[w])},k.fire=function(h,w,L){if(a)return p(h,null),a;var E=Math.random().toString(36).slice(2);return a=se(function(R){function S(B){B.data.callback===E&&(delete f[E],k.removeEventListener("message",S),a=null,ue.clear(),L(),R())}k.addEventListener("message",S),p(h,E),f[E]=S.bind(null,{data:{callback:E}})}),a},k.reset=function(){k.postMessage({reset:!0});for(var h in f)f[h](),delete f[h]}}return function(){if(o)return o;if(!G&&T){var k=["var CONFETTI, SIZE = {}, module = {};","("+g.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{o=new Worker(URL.createObjectURL(new Blob([k])))}catch(p){return typeof console<"u"&&typeof console.warn=="function"&&console.warn("ðŸŽŠ Could not load worker",p),null}b(o)}return o}})(),ye={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function z(o,a){return a?a(o):o}function Le(o){return o!=null}function A(o,a,f){return z(o&&Le(o[a])?o[a]:ye[a],f)}function ee(o){return o<0?0:Math.floor(o)}function Q(o,a){return Math.floor(Math.random()*(a-o))+o}function J(o){return parseInt(o,16)}function Z(o){return o.map(Y)}function Y(o){var a=String(o).replace(/[^0-9a-f]/gi,"");return a.length<6&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]),{r:J(a.substring(0,2)),g:J(a.substring(2,4)),b:J(a.substring(4,6))}}function $e(o){var a=A(o,"origin",Object);return a.x=A(a,"x",Number),a.y=A(a,"y",Number),a}function Ie(o){o.width=document.documentElement.clientWidth,o.height=document.documentElement.clientHeight}function ze(o){var a=o.getBoundingClientRect();o.width=a.width,o.height=a.height}function Be(o){var a=document.createElement("canvas");return a.style.position="fixed",a.style.top="0px",a.style.left="0px",a.style.pointerEvents="none",a.style.zIndex=o,a}function Ge(o,a,f,b,k,p,_,h,w){o.save(),o.translate(a,f),o.rotate(p),o.scale(b,k),o.arc(0,0,1,_,h,w),o.restore()}function Pe(o){var a=o.angle*(Math.PI/180),f=o.spread*(Math.PI/180);return{x:o.x,y:o.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:o.startVelocity*.5+Math.random()*o.startVelocity,angle2D:-a+(.5*f-Math.random()*f),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:o.color,shape:o.shape,tick:0,totalTicks:o.ticks,decay:o.decay,drift:o.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:o.gravity*3,ovalScalar:.6,scalar:o.scalar,flat:o.flat}}function Re(o,a){a.x+=Math.cos(a.angle2D)*a.velocity+a.drift,a.y+=Math.sin(a.angle2D)*a.velocity+a.gravity,a.velocity*=a.decay,a.flat?(a.wobble=0,a.wobbleX=a.x+10*a.scalar,a.wobbleY=a.y+10*a.scalar,a.tiltSin=0,a.tiltCos=0,a.random=1):(a.wobble+=a.wobbleSpeed,a.wobbleX=a.x+10*a.scalar*Math.cos(a.wobble),a.wobbleY=a.y+10*a.scalar*Math.sin(a.wobble),a.tiltAngle+=.1,a.tiltSin=Math.sin(a.tiltAngle),a.tiltCos=Math.cos(a.tiltAngle),a.random=Math.random()+2);var f=a.tick++/a.totalTicks,b=a.x+a.random*a.tiltCos,k=a.y+a.random*a.tiltSin,p=a.wobbleX+a.random*a.tiltCos,_=a.wobbleY+a.random*a.tiltSin;if(o.fillStyle="rgba("+a.color.r+", "+a.color.g+", "+a.color.b+", "+(1-f)+")",o.beginPath(),ae&&a.shape.type==="path"&&typeof a.shape.path=="string"&&Array.isArray(a.shape.matrix))o.fill(ke(a.shape.path,a.shape.matrix,a.x,a.y,Math.abs(p-b)*.1,Math.abs(_-k)*.1,Math.PI/10*a.wobble));else if(a.shape.type==="bitmap"){var h=Math.PI/10*a.wobble,w=Math.abs(p-b)*.1,L=Math.abs(_-k)*.1,E=a.shape.bitmap.width*a.scalar,R=a.shape.bitmap.height*a.scalar,S=new DOMMatrix([Math.cos(h)*w,Math.sin(h)*w,-Math.sin(h)*L,Math.cos(h)*L,a.x,a.y]);S.multiplySelf(new DOMMatrix(a.shape.matrix));var B=o.createPattern(ue.transform(a.shape.bitmap),"no-repeat");B.setTransform(S),o.globalAlpha=1-f,o.fillStyle=B,o.fillRect(a.x-E/2,a.y-R/2,E,R),o.globalAlpha=1}else if(a.shape==="circle")o.ellipse?o.ellipse(a.x,a.y,Math.abs(p-b)*a.ovalScalar,Math.abs(_-k)*a.ovalScalar,Math.PI/10*a.wobble,0,2*Math.PI):Ge(o,a.x,a.y,Math.abs(p-b)*a.ovalScalar,Math.abs(_-k)*a.ovalScalar,Math.PI/10*a.wobble,0,2*Math.PI);else if(a.shape==="star")for(var C=Math.PI/2*3,u=4*a.scalar,H=8*a.scalar,O=a.x,U=a.y,N=5,K=Math.PI/N;N--;)O=a.x+Math.cos(C)*H,U=a.y+Math.sin(C)*H,o.lineTo(O,U),C+=K,O=a.x+Math.cos(C)*u,U=a.y+Math.sin(C)*u,o.lineTo(O,U),C+=K;else o.moveTo(Math.floor(a.x),Math.floor(a.y)),o.lineTo(Math.floor(a.wobbleX),Math.floor(k)),o.lineTo(Math.floor(p),Math.floor(_)),o.lineTo(Math.floor(b),Math.floor(a.wobbleY));return o.closePath(),o.fill(),a.tick<a.totalTicks}function xe(o,a,f,b,k){var p=a.slice(),_=o.getContext("2d"),h,w,L=se(function(E){function R(){h=w=null,_.clearRect(0,0,b.width,b.height),ue.clear(),k(),E()}function S(){G&&!(b.width===n.width&&b.height===n.height)&&(b.width=o.width=n.width,b.height=o.height=n.height),!b.width&&!b.height&&(f(o),b.width=o.width,b.height=o.height),_.clearRect(0,0,b.width,b.height),p=p.filter(function(B){return Re(_,B)}),p.length?h=Me.frame(S):R()}h=Me.frame(S),w=R});return{addFettis:function(E){return p=p.concat(E),L},canvas:o,promise:L,reset:function(){h&&Me.cancel(h),w&&w()}}}function ge(o,a){var f=!o,b=!!A(a||{},"resize"),k=!1,p=A(a,"disableForReducedMotion",Boolean),_=T&&!!A(a||{},"useWorker"),h=_?F():null,w=f?Ie:ze,L=o&&h?!!o.__confetti_initialized:!1,E=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,R;function S(C,u,H){for(var O=A(C,"particleCount",ee),U=A(C,"angle",Number),N=A(C,"spread",Number),K=A(C,"startVelocity",Number),Se=A(C,"decay",Number),$=A(C,"gravity",Number),Ne=A(C,"drift",Number),Ee=A(C,"colors",Z),Oe=A(C,"ticks",Number),me=A(C,"shapes"),De=A(C,"scalar"),Fe=!!A(C,"flat"),X=$e(C),le=O,re=[],We=o.width*X.x,je=o.height*X.y;le--;)re.push(Pe({x:We,y:je,angle:U,spread:N,startVelocity:K,color:Ee[le%Ee.length],shape:me[Q(0,me.length)],ticks:Oe,decay:Se,gravity:$,drift:Ne,scalar:De,flat:Fe}));return R?R.addFettis(re):(R=xe(o,re,w,u,H),R.promise)}function B(C){var u=p||A(C,"disableForReducedMotion",Boolean),H=A(C,"zIndex",Number);if(u&&E)return se(function(K){K()});f&&R?o=R.canvas:f&&!o&&(o=Be(H),document.body.appendChild(o)),b&&!L&&w(o);var O={width:o.width,height:o.height};h&&!L&&h.init(o),L=!0,h&&(o.__confetti_initialized=!0);function U(){if(h){var K={getBoundingClientRect:function(){if(!f)return o.getBoundingClientRect()}};w(K),h.postMessage({resize:{width:K.width,height:K.height}});return}O.width=O.height=null}function N(){R=null,b&&(k=!1,c.removeEventListener("resize",U)),f&&o&&(document.body.contains(o)&&document.body.removeChild(o),o=null,L=!1)}return b&&!k&&(k=!0,c.addEventListener("resize",U,!1)),h?h.fire(C,O,N):S(C,O,N)}return B.reset=function(){h&&h.reset(),R&&R.reset()},B}var ne;function j(){return ne||(ne=ge(null,{useWorker:!0,resize:!0})),ne}function ke(o,a,f,b,k,p,_){var h=new Path2D(o),w=new Path2D;w.addPath(h,new DOMMatrix(a));var L=new Path2D;return L.addPath(w,new DOMMatrix([Math.cos(_)*k,Math.sin(_)*k,-Math.sin(_)*p,Math.cos(_)*p,f,b])),L}function Ve(o){if(!ae)throw new Error("path confetti are not supported in this browser");var a,f;typeof o=="string"?a=o:(a=o.path,f=o.matrix);var b=new Path2D(a),k=document.createElement("canvas"),p=k.getContext("2d");if(!f){for(var _=1e3,h=_,w=_,L=0,E=0,R,S,B=0;B<_;B+=2)for(var C=0;C<_;C+=2)p.isPointInPath(b,B,C,"nonzero")&&(h=Math.min(h,B),w=Math.min(w,C),L=Math.max(L,B),E=Math.max(E,C));R=L-h,S=E-w;var u=10,H=Math.min(u/R,u/S);f=[H,0,0,H,-Math.round(R/2+h)*H,-Math.round(S/2+w)*H]}return{type:"path",path:a,matrix:f}}function we(o){var a,f=1,b="#000000",k='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof o=="string"?a=o:(a=o.text,f="scalar"in o?o.scalar:f,k="fontFamily"in o?o.fontFamily:k,b="color"in o?o.color:b);var p=10*f,_=""+p+"px "+k,h=new OffscreenCanvas(p,p),w=h.getContext("2d");w.font=_;var L=w.measureText(a),E=Math.ceil(L.actualBoundingBoxRight+L.actualBoundingBoxLeft),R=Math.ceil(L.actualBoundingBoxAscent+L.actualBoundingBoxDescent),S=2,B=L.actualBoundingBoxLeft+S,C=L.actualBoundingBoxAscent+S;E+=S+S,R+=S+S,h=new OffscreenCanvas(E,R),w=h.getContext("2d"),w.font=_,w.fillStyle=b,w.fillText(a,B,C);var u=1/f;return{type:"bitmap",bitmap:h.transferToImageBitmap(),matrix:[u,0,0,u,-E*u/2,-R*u/2]}}s.exports=function(){return j().apply(this,arguments)},s.exports.reset=function(){j().reset()},s.exports.create=ge,s.exports.shapeFromPath=Ve,s.exports.shapeFromText=we})((function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}})(),at,!1);const Ae=at.exports;at.exports.create;const ja=(g,c)=>{const s=g.__vccOpts||g;for(const[G,n]of c)s[G]=n;return s},Ha={class:"flex flex-col h-full overflow-hidden"},Ua={key:0,class:"flex-1 flex items-center justify-center"},Ka={key:1,class:"flex-1 flex flex-col items-center justify-center px-4"},$a={class:"text-lg text-slate-500 dark:text-slate-400 mb-4"},Na={key:0,class:"shrink-0 px-4 py-2 bg-slate-50 dark:bg-slate-900 border-b border-slate-200 dark:border-slate-800"},Wa={class:"flex items-center justify-between mb-1"},Za={class:"text-xs text-slate-500 dark:text-slate-400"},qa={class:"flex items-center gap-2"},Qa={class:"py-1 min-w-[11rem]"},Ja={class:"text-slate-700 dark:text-slate-300"},Xa={class:"text-slate-700 dark:text-slate-300"},Ya={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"w-3 h-3"},es={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"w-3 h-3"},ts={key:1,class:"flex-1 overflow-y-auto"},as={key:0,class:"mx-4 mt-4 p-4 rounded-xl bg-amber-50 dark:bg-amber-950/50 border border-amber-300 dark:border-amber-700 text-center"},ss={class:"text-sm font-medium text-amber-700 dark:text-amber-300 mb-2"},ns={class:"max-w-md mx-auto px-4 py-8 text-center"},ls={class:"text-2xl font-bold mb-2 text-slate-800 dark:text-slate-200"},rs={class:"my-6 p-4 rounded-2xl bg-emerald-50 dark:bg-emerald-950/50 border border-emerald-200 dark:border-emerald-900"},os={class:"text-xs text-emerald-600 dark:text-emerald-400 mb-1 flex items-center justify-center gap-1"},is={class:"text-xl font-mono font-bold tracking-[0.4em] text-emerald-700 dark:text-emerald-300"},ds={class:"flex items-center justify-center gap-2 mt-3"},cs={key:0,class:"mb-6"},us={key:0,class:"text-sm text-slate-400 mt-2"},ms={key:1,class:"text-sm text-slate-500 dark:text-slate-400 mb-6"},vs={class:"space-y-1 mb-6"},fs={class:"flex items-center gap-2 min-w-0"},ps={class:"font-medium text-slate-800 dark:text-slate-200 truncate"},hs={key:0,class:"text-xs text-yellow-600 dark:text-yellow-400"},bs={key:1,class:"text-xs text-blue-500 dark:text-blue-400"},ys={key:2,class:"text-xs text-slate-400"},xs=["onClick"],gs={class:"py-1 min-w-[10rem]"},ks={key:2,class:"mb-6"},ws={key:3,class:"space-y-2 mb-6"},_s={class:"text-sm font-semibold text-slate-500 dark:text-slate-400"},Cs={class:"font-medium text-slate-700 dark:text-slate-300"},Ms={class:"text-xs text-slate-400 ml-2"},Ls={class:"p-4 rounded-xl bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-800 text-left mb-6"},Rs={class:"flex items-center justify-between mb-2"},Vs={class:"text-sm font-semibold text-slate-700 dark:text-slate-300"},Ss=["title"],Es={class:"grid grid-cols-2 gap-x-4 gap-y-1 text-sm text-slate-500 dark:text-slate-400"},Ts={class:"font-medium text-slate-700 dark:text-slate-300"},As={class:"font-medium text-slate-700 dark:text-slate-300"},Is={class:"font-medium text-slate-700 dark:text-slate-300"},zs={class:"font-medium text-slate-700 dark:text-slate-300"},Bs={class:"font-medium text-slate-700 dark:text-slate-300"},Gs={class:"font-medium text-slate-700 dark:text-slate-300"},Ps={class:"font-medium text-slate-700 dark:text-slate-300"},Os={class:"font-medium text-slate-700 dark:text-slate-300"},Ds={class:"font-medium text-slate-700 dark:text-slate-300"},Fs={class:"font-medium text-slate-700 dark:text-slate-300"},js={class:"font-medium text-slate-700 dark:text-slate-300"},Hs={key:2,class:"flex-1 overflow-y-auto"},Us={class:"text-emerald-700 dark:text-emerald-300 font-medium mb-2 break-words"},Ks={key:0,class:"text-xs text-slate-400 mt-2"},$s={class:"flex items-center gap-3"},Ns={class:"text-sm text-slate-700 dark:text-slate-300"},Ws={class:"text-xs text-slate-400"},Zs={class:"text-xs text-slate-400 dark:text-slate-500 text-left basis-full mt-1"},qs={class:"relative"},Qs=["placeholder"],Js={class:"text-xs text-slate-400"},Xs={class:"flex gap-2"},Ys={key:3,class:"flex-1 overflow-y-auto"},en={class:"text-xl font-bold text-center mb-6 text-slate-800 dark:text-slate-200"},tn={key:0,class:"text-xs text-slate-400 text-center mb-4"},an={class:"space-y-3"},sn=["onClick"],nn={class:"flex items-start justify-between gap-2"},ln={class:"select-none text-slate-800 dark:text-slate-200 break-words"},rn={key:0,class:"shrink-0 text-emerald-500 dark:text-emerald-400 text-xs font-medium"},on={key:0,class:"text-xs text-slate-400 mt-1"},dn={key:1,class:"text-center text-xs text-slate-400 mt-4"},cn={key:4,class:"flex-1 overflow-y-auto"},un={class:"text-xl font-bold text-center mb-6 text-slate-800 dark:text-slate-200"},mn={class:"space-y-3 mb-8"},vn={class:"flex items-start justify-between gap-3"},fn={class:"select-none font-medium text-slate-800 dark:text-slate-200 break-words"},pn={class:"text-sm text-slate-500 dark:text-slate-400 mt-1"},hn={class:"text-right shrink-0"},bn={class:"text-sm font-bold text-emerald-600 dark:text-emerald-400"},yn={class:"p-4 rounded-xl bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-800"},xn={class:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-3"},gn={class:"space-y-2"},kn={class:"text-sm text-slate-700 dark:text-slate-300"},wn={class:"text-sm font-bold text-emerald-600 dark:text-emerald-400"},_n={class:"text-center text-sm text-slate-400 mt-4"},Cn={key:0,class:"font-mono font-bold"},Mn={key:1},Ln={key:5,class:"flex-1 overflow-y-auto"},Rn={class:"max-w-lg mx-auto px-4 py-8 text-center"},Vn={class:"text-3xl font-bold mb-2 text-emerald-600 dark:text-emerald-400 animate-bounce-in"},Sn={key:0,class:"my-6 p-6 rounded-2xl bg-gradient-to-br from-emerald-50 to-yellow-50 dark:from-emerald-950/50 dark:to-yellow-950/30 border-2 border-emerald-300 dark:border-emerald-700 animate-winner-reveal shadow-lg shadow-emerald-200/50 dark:shadow-emerald-900/50"},En={class:"text-sm text-emerald-600 dark:text-emerald-400 mb-1 font-medium"},Tn={class:"text-3xl font-bold text-emerald-700 dark:text-emerald-300"},An={class:"text-lg font-bold text-yellow-600 dark:text-yellow-400 mt-1"},In={key:1,class:"my-6 p-6 rounded-2xl bg-gradient-to-br from-amber-50 to-slate-50 dark:from-amber-950/30 dark:to-slate-950/50 border-2 border-amber-300 dark:border-amber-700 animate-winner-reveal"},zn={class:"text-2xl font-bold text-amber-600 dark:text-amber-400"},Bn={class:"p-4 rounded-xl bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-800 mb-6"},Gn={class:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-3"},Pn={class:"space-y-2"},On={class:"flex items-center gap-2"},Dn={class:"text-sm font-medium text-slate-700 dark:text-slate-300"},Fn={class:"text-sm font-bold text-emerald-600 dark:text-emerald-400"},jn={class:"flex gap-3"},Hn={key:3,class:"shrink-0 border-t border-slate-200 dark:border-slate-800"},Un={class:"flex items-center gap-2 min-w-0 flex-1"},Kn={class:"shrink-0"},$n={key:0,class:"text-slate-400 dark:text-slate-500"},Nn={class:"font-medium text-purple-500 dark:text-purple-400"},Wn={class:"text-purple-500 dark:text-purple-400"},Zn={class:"font-medium text-emerald-600 dark:text-emerald-400"},qn={class:"text-slate-500 dark:text-slate-400"},Qn={class:"flex items-center gap-2 shrink-0"},Jn={class:"font-medium"},Xn={class:"font-medium text-emerald-600 dark:text-emerald-400"},Yn={class:"text-slate-700 dark:text-slate-300"},el={key:0,class:"text-slate-400 text-center py-2"},tl={class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"},al={key:0,class:"text-sm text-emerald-600 dark:text-emerald-400 font-medium"},sl={key:1,class:"text-sm text-red-500"},nl={class:"text-xs text-slate-400"},ll={class:"mb-4 text-sm text-slate-700 dark:text-slate-300"},rl={class:"mb-4"},ol={class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"},il={class:"flex gap-2 justify-end"},dl={class:"text-sm text-slate-600 dark:text-slate-400"},cl={key:0,class:"p-3 rounded-lg bg-red-50 dark:bg-red-950/50 border border-red-200 dark:border-red-900 text-sm text-red-700 dark:text-red-300"},ul={class:"flex gap-2 justify-end"},ml={class:"space-y-5 overflow-y-auto max-h-[70vh] px-1 py-2"},vl={key:0,class:"p-3 rounded-lg bg-red-50 dark:bg-red-950/50 border border-red-200 dark:border-red-900 text-sm text-red-700 dark:text-red-300"},fl={class:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2 block"},pl={class:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2 block"},hl={class:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2 block"},bl={class:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2 block"},yl={class:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2 block"},xl={class:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2 block"},gl={class:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2 block"},kl={class:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-1 block"},wl={class:"text-xs text-slate-400 mb-2"},_l={class:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-1 block"},Cl={class:"text-xs text-slate-400 mb-2"},Ml={class:"flex items-center justify-between"},Ll={for:"settingsReadyCheck",class:"text-sm font-medium text-slate-700 dark:text-slate-300 cursor-pointer"},Rl={class:"text-xs text-slate-400"},Vl={class:"flex items-center justify-between"},Sl={for:"settingsChat",class:"text-sm font-medium text-slate-700 dark:text-slate-300 cursor-pointer"},El={class:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2 block"},Tl={class:"flex gap-3"},Al={key:1},Il={class:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-1 block"},zl={class:"text-xs text-slate-400 mb-2"},Bl={class:"flex gap-2 justify-end mt-4"},Gl=Object.assign({layout:!1},{__name:"Game",props:{code:String},setup(g){const c=g,s=za(),G=ba(),{t:n}=Ra(),T=ya(),{animatePhaseIn:ae,staggerLetters:Ce,staggerCards:be,staggerRows:se,animateSwap:ue,pulse:Me}=Ta(),{phase:F}=xa(s),ye=x(!0),z=x(""),Le=x(!1),A=x(!1),ee=x(!1),Q=x(""),J=x(!1),Z=x(""),Y=x(null),$e=x(null),Ie=x(null),ze=x(null),Be=x(null),Ge=x(null),Pe=x(null),Re=x(null),xe=x(null),ge=x(!1),ne=x(0),j=x(!1),ke=x(0),Ve=x(!1),we=x(0),o=x(!1),a=x(null),f=x(""),b=x(""),k=x(null),p=x(null),_=x(null),h=x(!1),w=x(""),L=x(!1),E=x(!1),R=x(""),S=x(5),B=x(!1),C=x(!1),u=Sa({rounds:8,answer_time:60,vote_time:30,time_between_rounds:30,acronym_length:5,max_players:8,excluded_letters:"",chat_enabled:!0,allow_ready_check:!0,max_edits:0,max_vote_changes:0,is_private:!1,password:""}),H=x(!1),O=x(""),U=x(!1),N=x(""),K=x(""),Se=x(!1),$=x(!1),Ne=D(()=>s.currentGame?.settings?.allow_ready_check??!0),Ee=D(()=>s.currentGame?.settings?.max_edits??0),Oe=D(()=>s.currentGame?.settings?.max_vote_changes??0),me=D(()=>s.currentGame?.settings?.chat_enabled??!0),De=x(null),Fe=x(null),X=D(()=>J.value||!s.chatMessages.length?null:s.chatMessages[s.chatMessages.length-1]),le=D(()=>Ee.value===0?1/0:Math.max(0,Ee.value-Math.max(0,ke.value-1))),re=D(()=>Oe.value===0?1/0:Math.max(0,Oe.value-Math.max(0,we.value-1))),We=D(()=>s.currentGame?.settings?.rounds??5),je=D(()=>{const d=s.roundResults;if(!d||d.length<2)return!1;const l=d[0]?.votes??d[0]?.votes_count??0,i=d[1]?.votes??d[1]?.votes_count??0;return l===i&&l>0});function Ze(d){const l=s.roundResults;if(!l?.length)return!1;const i=l[0]?.votes??l[0]?.votes_count??0,V=d.votes??d.votes_count??0;return V>0&&V===i}function pt(d){return s.myVote?.answer_id===d||re.value>0}function st(d){const l=s.scores;if(!l?.length)return d+1;const i=l[d]?.score??0;return l.findIndex(ve=>(ve.score??0)===i)}function ht(d){const l=st(d),i=["ðŸ¥‡","ðŸ¥ˆ","ðŸ¥‰"];return l===0&&!s.currentGame?.winner?`${d+1}.`:l<3?i[l]:`${l+1}.`}function bt(d){const l=st(d);return l===0&&!s.currentGame?.winner?"text-slate-400":l===0?"text-yellow-500":l===1?"text-slate-400":l===2?"text-amber-700":"text-slate-400"}const qe=D(()=>s.acronym?s.acronym.split(""):[]),yt=D(()=>F.value==="playing"||F.value==="voting"||F.value==="results"),xt=D(()=>{let d;return F.value==="results"?d=s.currentGame?.settings?.time_between_rounds??15:F.value==="voting"?d=s.currentGame?.settings?.vote_time??30:d=s.currentGame?.settings?.answer_time??60,Math.max(0,s.timeRemaining/d*100)}),He=D(()=>{const l=(s.hasSubmittedAnswer&&!j.value?s.myAnswer?.text||"":Q.value).trim().split(/\s+/).filter(Boolean);return qe.value.map((i,V)=>{if(V>=l.length)return{expected:i,status:"empty"};const ve=l[V].charAt(0).toUpperCase();return{expected:i,status:ve===i.toUpperCase()?"correct":"wrong"}})}),gt=D(()=>He.value.filter(d=>d.status==="correct").length),kt=D(()=>Q.value.trim().split(/\s+/).filter(Boolean).length),Qe=D(()=>He.value.length>0&&He.value.every(d=>d.status==="correct")&&kt.value===qe.value.length);function wt(){Q.value=Q.value.replace(/[^\p{L}\s,.!?:;\-]/gu,"")}async function nt(){if(!G.isAuthenticated){ie.visit(`/logg-inn?redirect=${encodeURIComponent(`/spill/${c.code}`)}`);return}ye.value=!0,z.value="";try{await s.fetchGame(c.code);const d=G.player?.id;if(!s.players.some(i=>i.id===d)&&F.value!=="finished")try{await s.joinGame(c.code)}catch(i){const V=i.response?.data?.error||"";if(V.includes("password")||V.includes("Incorrect")){s.resetState(),U.value=!0;return}if(!V.toLowerCase().includes("already in game"))throw i}s.connectWebSocket(c.code),F.value!=="lobby"&&await s.fetchGameState(c.code)}catch(d){z.value=La(d,n)}finally{U.value||(ye.value=!1)}}async function lt(){try{await s.leaveGame(c.code),ie.visit("/spill")}catch{ie.visit("/spill")}}async function _t(){Le.value=!0;try{await s.startGame(c.code)}catch(d){z.value=d.response?.data?.message||n("common.error")}finally{Le.value=!1}}async function Ct(){try{await s.keepalive(c.code)}catch{}}function Mt(){T.require({message:n("lobby.endGameConfirm"),header:n("lobby.endGame"),acceptLabel:n("common.confirm"),rejectLabel:n("common.cancel"),accept:async()=>{try{await s.endGame(c.code),ie.visit("/spill")}catch(d){z.value=d.response?.data?.error||n("common.error")}}})}function rt(){$.value=!$.value,Lt()}async function Lt(){if(s.currentRound)try{await s.markReady(s.currentRound.id,$.value)}catch{$.value=!$.value}}function ot(){Q.value=s.myAnswer?.text||"",j.value=!0,$.value=!1}async function it(){if(!Qe.value||!s.currentRound)return;const d=Q.value.trim();if(j.value&&d===s.myAnswer?.text){j.value=!1;return}A.value=!0;try{await s.submitAnswer(s.currentRound.id,d),ke.value++,j.value=!1}catch(l){l.response?.status===422?z.value=n("game.answerInvalid"):z.value=l.response?.data?.error||l.response?.data?.message||n("common.error")}finally{A.value=!1}}function Rt(d){if(!(d.is_own||ee.value)){if(s.myVote?.answer_id===d.id){St();return}pt(d.id)&&Vt(d.id)}}async function Vt(d){if(!(!d||!s.currentRound||ee.value)){ee.value=!0;try{await s.submitVote(s.currentRound.id,d),we.value++}catch(l){z.value=l.response?.data?.message||n("common.error")}finally{ee.value=!1}}}async function St(){if(!(!s.currentRound||ee.value)){ee.value=!0;try{await s.retractVote(s.currentRound.id)}catch(d){z.value=d.response?.data?.message||n("common.error")}finally{ee.value=!1}}}function Et(){pe(()=>{Ie.value?.$el?.focus()})}async function Tt(){const d=Z.value.trim();if(d){if(G.player?.nickname,d.startsWith("/")){const l=d.split(" "),i=l[0].toLowerCase(),V=l.slice(1).join(" ");switch(i){case"/me":if(V)try{await s.sendChatMessage(c.code,V,!0),Z.value=""}catch{}return;case"/away":try{await s.sendChatMessage(c.code,V||"is away",!0)}catch{}Z.value="";return;case"/whois":{const ve=V.trim(),Te=s.players.find(Je=>Je.nickname.toLowerCase()===ve.toLowerCase());if(Te){const Je=Te.id===s.currentGame?.host_player_id?"Host":Te.is_co_host?"Co-host":"Player";s.chatMessages.push({system:!0,message:`${Te.nickname} [${Je}] â€” Score: ${Te.score??0}`})}else s.chatMessages.push({system:!0,message:ve?`${ve}: No such nick`:"Usage: /whois <nick>"});Z.value="";return}case"/quit":case"/part":Z.value="",lt();return;default:s.chatMessages.push({system:!0,message:`Unknown command: ${i}`}),Z.value="";return}}try{await s.sendChatMessage(c.code,d),Z.value=""}catch{}}}async function At(){if(w.value.trim()){L.value=!0,R.value="",E.value=!1;try{const{data:d}=await Va.games.invite(c.code,w.value.trim());E.value=!0,S.value=d.invites_remaining??0,w.value="",setTimeout(()=>{E.value=!1},3e3)}catch(d){d.response?.status===429&&(S.value=0),R.value=d.response?.data?.error||n("lobby.inviteError")}finally{L.value=!1}}}function It(){Ae({particleCount:150,spread:100,origin:{y:.6}}),setTimeout(()=>{Ae({particleCount:80,angle:60,spread:55,origin:{x:0,y:.7}}),Ae({particleCount:80,angle:120,spread:55,origin:{x:1,y:.7}})},300),setTimeout(()=>{Ae({particleCount:50,spread:360,startVelocity:30,ticks:60,origin:{x:.5,y:.3},colors:["#FFD700","#FFA500","#FF6347"],shapes:["star"]})},700),setTimeout(()=>{Ae({particleCount:100,spread:160,origin:{y:.35},gravity:1.2})},1200)}async function zt(){Ve.value=!0;try{await s.rematch(c.code);const d=s.gameCode;d&&ie.visit(`/spill/${d}`)}catch(d){z.value=d.response?.data?.error||n("common.error")}finally{Ve.value=!1}}async function Bt(d){try{await s.toggleCoHost(c.code,d)}catch(l){z.value=l.response?.data?.error||n("common.error")}}function Gt(d){return d.id===s.currentGame?.host_player_id||d.id===G.player?.id?!1:s.isHost}function Pt(d,l){p.value=l,k.value.toggle(d)}function Ot(){k.value.hide(),p.value&&Bt(p.value.id)}function Dt(){k.value.hide(),p.value&&Kt(p.value.id,p.value.nickname)}function Ft(){k.value.hide(),p.value&&$t(p.value.id,p.value.nickname)}function jt(){k.value.hide(),p.value&&Ut(p.value.id)}async function Ht(){B.value=!0;try{await s.addBot(c.code)}catch(d){z.value=d.response?.data?.error||n("common.error")}finally{B.value=!1}}async function Ut(d){try{await s.removeBot(c.code,d)}catch(l){z.value=l.response?.data?.error||n("common.error")}}function Kt(d,l){T.require({message:n("lobby.kickConfirm").replace("{name}",l),header:n("lobby.kick"),acceptLabel:n("common.confirm"),rejectLabel:n("common.cancel"),accept:async()=>{try{await s.kickPlayer(c.code,d)}catch(i){z.value=i.response?.data?.error||n("common.error")}}})}function $t(d,l){b.value="",a.value=d,f.value=l,o.value=!0}async function Nt(){try{await s.banPlayer(c.code,a.value,b.value||null),o.value=!1}catch(d){z.value=d.response?.data?.error||n("common.error")}}async function Wt(d){try{await s.unbanPlayer(c.code,d)}catch(l){z.value=l.response?.data?.error||n("common.error")}}function Zt(d){_.value.toggle(d)}async function qt(){try{await s.updateSettings(c.code,{settings:{chat_enabled:!me.value}})}catch(d){z.value=d.response?.data?.error||n("common.error")}}async function Qt(){try{await s.updateVisibility(c.code,!s.currentGame?.is_public)}catch(d){z.value=d.response?.data?.error||n("common.error")}}async function Jt(){Se.value=!0,K.value="";try{await s.joinGame(c.code,N.value),U.value=!1,N.value="",await s.fetchGame(c.code),s.connectWebSocket(c.code),F.value!=="lobby"&&await s.fetchGameState(c.code),ye.value=!1}catch(d){K.value=d.response?.data?.error||n("common.error")}finally{Se.value=!1}}function Xt(){const d=s.currentGame?.settings??{};u.rounds=d.rounds??8,u.answer_time=d.answer_time??60,u.vote_time=d.vote_time??30,u.time_between_rounds=d.time_between_rounds??30,u.acronym_length=d.acronym_length_min??5,u.max_players=d.max_players??8,u.excluded_letters=d.excluded_letters??"",u.chat_enabled=d.chat_enabled??!0,u.allow_ready_check=d.allow_ready_check??!0,u.max_edits=d.max_edits??0,u.max_vote_changes=d.max_vote_changes??0,u.is_private=!s.currentGame?.is_public,u.password="",O.value="",C.value=!0}async function Yt(){H.value=!0,O.value="";try{await s.updateSettings(c.code,{settings:{rounds:u.rounds,answer_time:u.answer_time,vote_time:u.vote_time,time_between_rounds:u.time_between_rounds,acronym_length_min:u.acronym_length,acronym_length_max:u.acronym_length,max_players:u.max_players,excluded_letters:u.excluded_letters||void 0,chat_enabled:u.chat_enabled,allow_ready_check:u.allow_ready_check,max_edits:u.max_edits,max_vote_changes:u.max_vote_changes},is_public:!u.is_private,password:u.is_private&&u.password?u.password:void 0}),C.value=!1}catch(d){O.value=d.response?.data?.error||d.response?.data?.message||n("common.error")}finally{H.value=!1}}function ea(){const d=s.gameCode||c.code,l=`${window.location.origin}/spill/${d}`;navigator.clipboard.writeText(l),ge.value=!0,setTimeout(()=>{ge.value=!1},2e3)}fe(()=>s.chatMessages.length,(d,l)=>{J.value?pe(()=>{if(Y.value){Y.value.scrollTop=Y.value.scrollHeight;const i=Y.value.querySelectorAll(".chat-line");i.length&&ue(i[i.length-1])}}):(ne.value+=Math.max(1,d-(l??0)),pe(()=>{Me(De.value),ue(Fe.value)}))}),fe(J,d=>{d&&(ne.value=0,pe(()=>{Y.value&&(Y.value.scrollTop=Y.value.scrollHeight)}))}),fe(()=>s.myAnswer?.is_ready,d=>{d!==void 0&&($.value=d)}),fe(()=>s.myAnswer?.edit_count,d=>{d!==void 0&&(ke.value=d+1)}),fe(()=>s.myVote?.change_count,d=>{d!==void 0&&(we.value=d+1)});const dt=D(()=>s.hasSubmittedAnswer&&!j.value);return fe(dt,()=>{pe(()=>{ue(dt.value?ze.value:Be.value)})}),fe(F,(d,l)=>{d==="playing"&&l&&(Q.value="",j.value=!1,$.value=!1,ke.value=0,we.value=0),d==="finished"&&l!=="finished"&&pe(()=>{s.currentGame?.winner&&It()}),l&&pe(()=>{if(d==="playing")ae(Ge.value),Ce(Pe.value);else if(d==="voting")ae(Re.value),be(Re.value,".vote-card",.15);else if(d==="results"){ae(xe.value);const i=be(xe.value,".result-card",.1);se(xe.value,".score-row",i+.1)}else d==="finished"&&se(document.querySelector(".final-score-row")?.parentElement,".final-score-row",.4)})}),ga(async()=>{G.isInitialized||await G.loadFromStorage(),nt()}),ka(()=>{s.disconnectWebSocket()}),(d,l)=>(m(),v(P,null,[y(Ea,{"game-code":e(s).gameCode||c.code,"player-count":e(s).players.length,"is-private":e(s).currentGame?.has_password===!0,onLeave:lt},{default:te(()=>[t("div",Ha,[ye.value?(m(),v("div",Ua,[y(e(mt),{mode:"indeterminate",class:"w-48"})])):z.value?(m(),v("div",Ka,[t("p",$a,r(z.value),1),y(e(I),{label:e(n)("common.retry"),severity:"secondary",onClick:nt},null,8,["label"])])):(m(),v(P,{key:2},[yt.value?(m(),v("div",Na,[t("div",Wa,[t("span",Za,r(e(n)("game.round"))+" "+r(e(s).currentRound?.round_number??1)+" "+r(e(n)("game.of"))+" "+r(We.value),1),t("div",qa,[e(s).isHost?(m(),v("button",{key:0,onClick:Zt,class:"w-6 h-6 flex items-center justify-center rounded-md text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 hover:bg-slate-200 dark:hover:bg-slate-800 transition-colors"},[...l[35]||(l[35]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"w-4 h-4"},[t("path",{"fill-rule":"evenodd",d:"M7.84 1.804A1 1 0 018.82 1h2.36a1 1 0 01.98.804l.331 1.652a6.993 6.993 0 011.929 1.115l1.598-.54a1 1 0 011.186.447l1.18 2.044a1 1 0 01-.205 1.251l-1.267 1.113a7.047 7.047 0 010 2.228l1.267 1.113a1 1 0 01.206 1.25l-1.18 2.045a1 1 0 01-1.187.447l-1.598-.54a6.993 6.993 0 01-1.929 1.115l-.33 1.652a1 1 0 01-.98.804H8.82a1 1 0 01-.98-.804l-.331-1.652a6.993 6.993 0 01-1.929-1.115l-1.598.54a1 1 0 01-1.186-.447l-1.18-2.044a1 1 0 01.205-1.251l1.267-1.114a7.05 7.05 0 010-2.227L1.821 7.773a1 1 0 01-.206-1.25l1.18-2.045a1 1 0 011.187-.447l1.598.54A6.993 6.993 0 017.51 3.456l.33-1.652zM10 13a3 3 0 100-6 3 3 0 000 6z","clip-rule":"evenodd"})],-1)])])):M("",!0),y(e(tt),{ref_key:"hostMenuRef",ref:_},{default:te(()=>[t("div",Qa,[t("button",{class:"w-full text-left px-3 py-2 text-sm hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors flex items-center justify-between gap-3",onClick:qt},[t("span",Ja,r(e(n)("game.chat")),1),t("span",{class:W(["text-xs font-medium",me.value?"text-emerald-600 dark:text-emerald-400":"text-slate-400 dark:text-slate-500"])},r(me.value?e(n)("common.on"):e(n)("common.off")),3)]),t("button",{class:"w-full text-left px-3 py-2 text-sm hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors flex items-center justify-between gap-3",onClick:Qt},[t("span",Xa,r(e(n)("create.visibility")),1),t("span",{class:W(["text-xs font-medium flex items-center gap-1",e(s).currentGame?.is_public?"text-emerald-600 dark:text-emerald-400":"text-amber-600 dark:text-amber-400"])},[e(s).currentGame?.is_public?(m(),v("svg",es,[...l[37]||(l[37]=[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM4.332 8.027a6.012 6.012 0 011.912-2.706C6.512 5.73 6.974 6 7.5 6A1.5 1.5 0 019 7.5V8a2 2 0 004 0 2 2 0 011.523-1.943A5.977 5.977 0 0116 10c0 .34-.028.675-.083 1H15a2 2 0 00-2 2v2.197A5.973 5.973 0 0110 16v-2a2 2 0 00-2-2 2 2 0 01-2-2 2 2 0 00-1.668-1.973z","clip-rule":"evenodd"},null,-1)])])):(m(),v("svg",Ya,[...l[36]||(l[36]=[t("path",{"fill-rule":"evenodd",d:"M10 1a4.5 4.5 0 00-4.5 4.5V9H5a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002-2v-6a2 2 0 00-2-2h-.5V5.5A4.5 4.5 0 0010 1zm3 8V5.5a3 3 0 10-6 0V9h6z","clip-rule":"evenodd"},null,-1)])])),q(" "+r(e(s).currentGame?.is_public?e(n)("create.public"):e(n)("create.private")),1)],2)])])]),_:1},512),t("span",{class:W(["text-sm font-mono font-bold",e(s).timeRemaining<=10?"text-red-500":"text-slate-700 dark:text-slate-300"])},r(e(s).timeRemaining)+"s ",3)])]),y(e(mt),{value:xt.value,showValue:!1,class:W({"timer-warning":e(s).timeRemaining<=10}),style:{height:"4px"}},null,8,["value","class"])])):M("",!0),e(F)==="lobby"?(m(),v("div",ts,[e(s).lobbyExpiring?(m(),v("div",as,[t("p",ss,r(e(n)("lobby.expiringWarning")),1),y(e(I),{label:e(n)("lobby.keepOpen"),severity:"warn",size:"small",onClick:Ct},null,8,["label"])])):M("",!0),t("div",ns,[t("h2",ls,r(e(n)("lobby.title")),1),t("div",rs,[t("p",os,[e(s).currentGame?.has_password?(m(),v(P,{key:0},[l[38]||(l[38]=t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"w-3.5 h-3.5 text-amber-500 dark:text-amber-400"},[t("path",{"fill-rule":"evenodd",d:"M10 1a4.5 4.5 0 00-4.5 4.5V9H5a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002-2v-6a2 2 0 00-2-2h-.5V5.5A4.5 4.5 0 0010 1zm3 8V5.5a3 3 0 10-6 0V9h6z","clip-rule":"evenodd"})],-1)),q(" "+r(e(n)("lobby.privateGame")),1)],64)):(m(),v(P,{key:1},[q(r(e(n)("lobby.gameCode")),1)],64))]),t("p",is,r(e(s).gameCode),1),t("div",ds,[y(e(I),{label:ge.value?e(n)("lobby.copied"):e(n)("lobby.shareLink"),size:"small",severity:"success",onClick:ea},null,8,["label"]),y(e(I),{label:e(n)("lobby.inviteEmail"),size:"small",severity:"secondary",onClick:l[0]||(l[0]=i=>h.value=!0)},null,8,["label"])])]),e(s).isHost?(m(),v("div",cs,[y(e(I),{label:e(n)("lobby.startGame"),severity:"success",size:"large",class:"w-full",disabled:e(s).players.length<2,loading:Le.value,onClick:_t},null,8,["label","disabled","loading"]),e(s).players.length<2?(m(),v("p",us,r(e(n)("lobby.needMorePlayers")),1)):M("",!0),y(e(I),{label:e(n)("lobby.endGame"),severity:"danger",variant:"text",size:"small",class:"w-full mt-2",onClick:Mt},null,8,["label"])])):(m(),v("p",ms,r(e(n)("lobby.waitingForHost")),1)),t("div",vs,[(m(!0),v(P,null,oe(e(s).players,i=>(m(),v("div",{key:i.id,class:"flex items-center justify-between px-3 py-2 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-900 transition-colors"},[t("div",fs,[t("span",ps,r(i.nickname),1),i.id===e(s).currentGame?.host_player_id?(m(),v("span",hs,r(e(n)("lobby.host")),1)):i.is_co_host?(m(),v("span",bs,r(e(n)("lobby.coHost")),1)):i.is_bot?(m(),v("span",ys,r(e(n)("lobby.bot")),1)):M("",!0)]),Gt(i)?(m(),v("button",{key:0,class:"w-7 h-7 shrink-0 rounded-md flex items-center justify-center text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 hover:bg-slate-200 dark:hover:bg-slate-800 transition-colors",onClick:V=>Pt(V,i)},[...l[39]||(l[39]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"w-4 h-4"},[t("path",{d:"M3 10a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0zM8.5 10a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0zM15.5 8.5a1.5 1.5 0 100 3 1.5 1.5 0 000-3z"})],-1)])],8,xs)):M("",!0)]))),128))]),y(e(tt),{ref_key:"playerMenuRef",ref:k},{default:te(()=>[t("div",gs,[p.value?.is_bot?(m(),v("button",{key:0,class:"w-full text-left px-3 py-2 text-sm hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors flex items-center gap-2 text-amber-600 dark:text-amber-400",onClick:jt},[l[40]||(l[40]=t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"w-4 h-4"},[t("path",{d:"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"})],-1)),q(" "+r(e(n)("lobby.removeBot")),1)])):(m(),v(P,{key:1},[e(s).isActualHost&&p.value?(m(),v("button",{key:0,class:"w-full text-left px-3 py-2 text-sm hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors flex items-center gap-2 text-slate-700 dark:text-slate-300",onClick:Ot},[l[41]||(l[41]=t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"w-4 h-4 text-blue-500"},[t("path",{d:"M10 8a3 3 0 100-6 3 3 0 000 6zM3.465 14.493a1.23 1.23 0 00.41 1.412A9.957 9.957 0 0010 18c2.31 0 4.438-.784 6.131-2.1.43-.333.604-.903.408-1.41a7.002 7.002 0 00-13.074.003z"})],-1)),q(" "+r(p.value?.is_co_host?e(n)("lobby.removeCoHost"):e(n)("lobby.makeCoHost")),1)])):M("",!0),t("button",{class:"w-full text-left px-3 py-2 text-sm hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors flex items-center gap-2 text-amber-600 dark:text-amber-400",onClick:Dt},[l[42]||(l[42]=t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"w-4 h-4"},[t("path",{d:"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"})],-1)),q(" "+r(e(n)("lobby.kick")),1)]),t("button",{class:"w-full text-left px-3 py-2 text-sm hover:bg-red-50 dark:hover:bg-red-950/30 transition-colors flex items-center gap-2 text-red-600 dark:text-red-400",onClick:Ft},[l[43]||(l[43]=t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"w-4 h-4"},[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z","clip-rule":"evenodd"})],-1)),q(" "+r(e(n)("lobby.ban")),1)])],64))])]),_:1},512),e(s).isHost?(m(),v("div",ks,[y(e(I),{label:e(n)("lobby.addBot"),severity:"secondary",variant:"outlined",size:"small",loading:B.value,onClick:Ht},null,8,["label","loading"])])):M("",!0),e(s).isHost&&e(s).currentGame?.banned_players?.length?(m(),v("div",ws,[t("h3",_s,r(e(n)("lobby.bannedPlayers")),1),(m(!0),v(P,null,oe(e(s).currentGame.banned_players,i=>(m(),v("div",{key:i.id,class:"flex items-center justify-between p-3 rounded-xl bg-red-50 dark:bg-red-950/30 border border-red-200 dark:border-red-900"},[t("div",null,[t("span",Cs,r(i.nickname),1),t("span",Ms,r(i.ban_reason||e(n)("lobby.noBanReason")),1)]),y(e(I),{label:e(n)("lobby.unban"),size:"small",severity:"secondary",variant:"text",onClick:V=>Wt(i.id)},null,8,["label","onClick"])]))),128))])):M("",!0),t("div",Ls,[t("div",Rs,[t("h3",Vs,r(e(n)("lobby.settings")),1),e(s).isHost?(m(),v("button",{key:0,class:"w-7 h-7 rounded-md flex items-center justify-center text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 hover:bg-slate-200 dark:hover:bg-slate-800 transition-colors",onClick:Xt,title:e(n)("lobby.editSettings")},[...l[44]||(l[44]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"w-4 h-4"},[t("path",{"fill-rule":"evenodd",d:"M7.84 1.804A1 1 0 018.82 1h2.36a1 1 0 01.98.804l.331 1.652a6.993 6.993 0 011.929 1.115l1.598-.54a1 1 0 011.186.447l1.18 2.044a1 1 0 01-.205 1.251l-1.267 1.113a7.047 7.047 0 010 2.228l1.267 1.113a1 1 0 01.206 1.25l-1.18 2.045a1 1 0 01-1.187.447l-1.598-.54a6.993 6.993 0 01-1.929 1.115l-.33 1.652a1 1 0 01-.98.804H8.82a1 1 0 01-.98-.804l-.331-1.652a6.993 6.993 0 01-1.929-1.115l-1.598.54a1 1 0 01-1.186-.447l-1.18-2.044a1 1 0 01.205-1.251l1.267-1.114a7.05 7.05 0 010-2.227L1.821 7.773a1 1 0 01-.206-1.25l1.18-2.045a1 1 0 011.187-.447l1.598.54A6.993 6.993 0 017.51 3.456l.33-1.652zM10 13a3 3 0 100-6 3 3 0 000 6z","clip-rule":"evenodd"})],-1)])],8,Ss)):M("",!0)]),t("div",Es,[t("span",null,r(e(n)("create.rounds"))+":",1),t("span",Ts,r(e(s).currentGame?.settings?.rounds??5),1),t("span",null,r(e(n)("create.answerTime"))+":",1),t("span",As,r(e(s).currentGame?.settings?.answer_time??60)+"s",1),t("span",null,r(e(n)("create.voteTime"))+":",1),t("span",Is,r(e(s).currentGame?.settings?.vote_time??30)+"s",1),t("span",null,r(e(n)("create.timeBetweenRounds"))+":",1),t("span",zs,r(e(s).currentGame?.settings?.time_between_rounds??30)+"s",1),t("span",null,r(e(n)("create.acronymLength"))+":",1),t("span",Bs,r(e(s).currentGame?.settings?.acronym_length_min??5),1),t("span",null,r(e(n)("create.maxPlayers"))+":",1),t("span",Gs,r(e(s).currentGame?.settings?.max_players??8),1),t("span",null,r(e(n)("create.maxEditsShort"))+":",1),t("span",Ps,r((e(s).currentGame?.settings?.max_edits??0)===0?e(n)("create.unlimited"):e(s).currentGame?.settings?.max_edits),1),t("span",null,r(e(n)("create.maxVoteChangesShort"))+":",1),t("span",Os,r((e(s).currentGame?.settings?.max_vote_changes??0)===0?e(n)("create.unlimited"):e(s).currentGame?.settings?.max_vote_changes),1),t("span",null,r(e(n)("create.readyCheck"))+":",1),t("span",Ds,r(e(s).currentGame?.settings?.allow_ready_check??!0?e(n)("common.yes"):e(n)("common.no")),1),t("span",null,r(e(n)("game.chat"))+":",1),t("span",Fs,r(e(s).currentGame?.settings?.chat_enabled??!0?e(n)("common.yes"):e(n)("common.no")),1),t("span",null,r(e(n)("create.visibility"))+":",1),t("span",js,r(e(s).currentGame?.is_public?e(n)("create.public"):e(n)("create.private")),1)])])])])):e(F)==="playing"?(m(),v("div",Hs,[t("div",{ref_key:"playingContainerRef",ref:Ge,class:"max-w-lg mx-auto px-4 py-6 text-center"},[t("div",{ref_key:"acronymContainerRef",ref:Pe,class:"flex justify-center gap-1.5 sm:gap-3 mb-6"},[(m(!0),v(P,null,oe(He.value,(i,V)=>(m(),v("span",{key:V,class:W(["acronym-letter select-none inline-flex items-center justify-center w-12 h-12 sm:w-16 sm:h-16 rounded-xl text-xl sm:text-3xl font-bold border-2 transition-colors duration-150",i.status==="correct"?"bg-emerald-100 dark:bg-emerald-900/50 text-emerald-700 dark:text-emerald-300 border-emerald-400 dark:border-emerald-600":i.status==="wrong"?"bg-red-100 dark:bg-red-900/50 text-red-600 dark:text-red-400 border-red-400 dark:border-red-700":"bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-300 border-slate-300 dark:border-slate-600"])},r(i.expected),3))),128))],512),e(s).hasSubmittedAnswer&&!j.value?(m(),v("div",{key:0,ref_key:"submittedRef",ref:ze,class:"space-y-4"},[t("div",{class:W(["p-6 rounded-2xl bg-emerald-50 dark:bg-emerald-950/50 border border-emerald-200 dark:border-emerald-900",!$.value&&le.value>0?"cursor-pointer hover:border-emerald-400 dark:hover:border-emerald-500 transition-colors":""]),onClick:l[1]||(l[1]=i=>!$.value&&le.value>0&&ot())},[t("p",Us,r(e(s).myAnswer?.text?.toLowerCase()),1),e(s).currentRound?(m(),v("p",Ks,r(e(s).currentRound.answers_count??0)+"/"+r(e(s).currentRound.total_players??e(s).players.length)+" "+r(e(n)("game.submitted")),1)):M("",!0)],2),Ne.value?(m(),v("div",{key:0,class:"flex flex-wrap items-center justify-between p-3 rounded-xl bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-800 cursor-pointer select-none",onClick:rt},[t("div",$s,[y(e(Ia),{modelValue:$.value,binary:!0,onClick:he(rt,["stop"])},null,8,["modelValue"]),t("span",Ns,r(e(n)("game.readyLabel")),1)]),t("span",Ws,r(e(s).readyCount)+"/"+r(e(s).totalPlayersForReady||e(s).players.length)+" "+r(e(n)("game.readyCount")),1),t("p",Zs,r(e(n)("game.readyHint")),1)])):M("",!0),le.value>0?(m(),ce(e(I),{key:1,label:le.value===1/0?e(n)("game.edit"):`${e(n)("game.edit")} (${le.value} ${e(n)("game.remaining")})`,severity:"secondary",variant:"outlined",size:"small",class:"w-full",disabled:$.value,onClick:ot},null,8,["label","disabled"])):M("",!0)],512)):(m(),v("form",{key:1,ref_key:"answerFormRef",ref:Be,onSubmit:he(it,["prevent"]),class:"space-y-4"},[t("div",qs,[ft(t("textarea",{ref_key:"answerInput",ref:$e,"onUpdate:modelValue":l[2]||(l[2]=i=>Q.value=i),placeholder:e(n)("game.yourAnswer"),rows:"3",class:"w-full p-4 rounded-xl bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-800 text-slate-800 dark:text-slate-200 text-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 resize-none",onInput:wt,onKeydown:l[3]||(l[3]=wa(he(i=>Qe.value&&it(),["prevent"]),["enter"]))},null,40,Qs),[[_a,Q.value]])]),t("p",Js,r(gt.value)+"/"+r(qe.value.length)+" "+r(e(n)("game.wordsMatch")),1),t("div",Xs,[j.value?(m(),ce(e(I),{key:0,label:e(n)("common.cancel"),severity:"secondary",variant:"outlined",class:"flex-1",onClick:l[4]||(l[4]=i=>j.value=!1)},null,8,["label"])):M("",!0),y(e(I),{type:"submit",label:j.value?e(n)("game.updateAnswer"):e(n)("game.submitAnswer"),severity:"success",class:W(j.value?"flex-1":"w-full"),disabled:!Qe.value,loading:A.value},null,8,["label","class","disabled","loading"])])],544))],512)])):e(F)==="voting"?(m(),v("div",Ys,[t("div",{ref_key:"votingContainerRef",ref:Re,class:"max-w-lg mx-auto px-4 py-6"},[t("h2",en,r(e(n)("game.voting")),1),e(s).currentRound?(m(),v("p",tn,r(e(s).currentRound.votes_count??0)+"/"+r(e(s).currentRound.total_voters??0)+" "+r(e(n)("game.votes")),1)):M("",!0),t("div",an,[(m(!0),v(P,null,oe(e(s).answers,i=>(m(),v("div",{key:i.id,class:W(["vote-card p-4 rounded-xl border-2 transition-colors",i.is_own?"border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-900 opacity-50 cursor-not-allowed":e(s).myVote?.answer_id===i.id?"border-emerald-500 dark:border-emerald-400 bg-emerald-50 dark:bg-emerald-950/50 cursor-pointer":"border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-900 hover:border-emerald-300 dark:hover:border-emerald-700 cursor-pointer"]),onClick:V=>Rt(i)},[t("div",nn,[t("p",ln,r(i.text?.toLowerCase()),1),e(s).myVote?.answer_id===i.id?(m(),v("span",rn,r(e(n)("game.yourVote")),1)):M("",!0)]),i.is_own?(m(),v("p",on,r(e(n)("game.yourSubmission")),1)):M("",!0)],10,sn))),128))]),e(s).hasVoted?(m(),v("p",dn,r(re.value>0?re.value===1/0?e(n)("game.tapToChangeVote"):`${e(n)("game.tapToChangeVote")} (${re.value} ${e(n)("game.voteChangesRemaining")})`:""),1)):M("",!0)],512)])):e(F)==="results"?(m(),v("div",cn,[t("div",{ref_key:"resultsContainerRef",ref:xe,class:"max-w-lg mx-auto px-4 py-6"},[t("h2",un,r(e(n)("game.results")),1),t("div",mn,[(m(!0),v(P,null,oe(e(s).roundResults,(i,V)=>(m(),v("div",{key:i.player_id||V,class:W(["result-card p-4 rounded-xl border border-slate-200 dark:border-slate-800",Ze(i)?"bg-emerald-50 dark:bg-emerald-950/50 border-emerald-200 dark:border-emerald-900":"bg-slate-50 dark:bg-slate-900"])},[t("div",vn,[t("div",null,[t("p",fn,r((i.answer||i.text)?.toLowerCase()),1),t("p",pn,r(i.player_name||i.player_nickname),1)]),t("div",hn,[t("p",bn,r(i.votes??i.votes_count??0)+" "+r(e(n)("game.votes")),1)])]),Ze(i)&&!je.value?(m(),ce(e(et),{key:0,value:e(n)("game.winner"),severity:"success",class:"mt-2"},null,8,["value"])):Ze(i)&&je.value?(m(),ce(e(et),{key:1,value:e(n)("game.tie"),severity:"warn",class:"mt-2"},null,8,["value"])):M("",!0)],2))),128))]),t("div",yn,[t("h3",xn,r(e(n)("game.scoreboard")),1),t("div",gn,[(m(!0),v(P,null,oe(e(s).scores,i=>(m(),v("div",{key:i.player_id,class:"score-row flex items-center justify-between select-none"},[t("span",kn,r(i.player_name||i.nickname),1),t("span",wn,r(i.score)+" "+r(e(n)("game.points")),1)]))),128))])]),t("p",_n,[q(r(e(n)("game.nextRound"))+" ",1),e(s).timeRemaining>0?(m(),v("span",Cn,r(e(s).timeRemaining)+"s",1)):(m(),v("span",Mn,"..."))])],512)])):e(F)==="finished"?(m(),v("div",Ln,[t("div",Rn,[t("h2",Vn,r(e(s).currentGame?.settings?.finished_reason==="inactivity"?e(n)("game.finishedInactivity"):e(n)("game.finished")),1),e(s).currentGame?.winner?(m(),v("div",Sn,[l[45]||(l[45]=t("div",{class:"text-4xl mb-2"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-12 h-12 mx-auto text-yellow-500 animate-trophy-bounce"},[t("path",{d:"M5 3h14c.55 0 1 .45 1 1v2c0 2.76-2.24 5-5 5h-.42c-.77 1.25-1.94 2.18-3.33 2.65L12 17h2a1 1 0 110 2H10a1 1 0 110-2h2l-.75-3.35C9.84 13.18 8.67 12.25 7.9 11H7.5C5.24 11 3 8.76 3 6V4c0-.55.45-1 1-1h1zm1 2v1c0 1.65 1.35 3 3 3h.09c-.05-.33-.09-.66-.09-1V5H6zm12 0h-3v3c0 .34-.04.67-.09 1H15c1.65 0 3-1.35 3-3V5z"})])],-1)),t("p",En,r(e(n)("game.winner")),1),t("p",Tn,r(e(s).currentGame.winner.player_name||e(s).currentGame.winner.nickname),1),t("p",An,r(e(s).currentGame.winner.score)+" "+r(e(n)("game.points")),1)])):(m(),v("div",In,[l[46]||(l[46]=t("p",{class:"text-4xl mb-2"},"ðŸ¤",-1)),t("p",zn,r(e(n)("game.tie"))+"!",1)])),t("div",Bn,[t("h3",Gn,r(e(n)("game.finalScores")),1),t("div",Pn,[(m(!0),v(P,null,oe(e(s).scores,(i,V)=>(m(),v("div",{key:i.player_id,class:W(["final-score-row flex items-center justify-between p-2 rounded transition-all",e(s).currentGame?.winner&&V===0?"bg-emerald-50 dark:bg-emerald-950/50 ring-1 ring-emerald-200 dark:ring-emerald-800":""]),style:Ca({animationDelay:`${V*100}ms`})},[t("div",On,[t("span",{class:W(["text-sm font-bold w-5",bt(V)])},r(ht(V)),3),t("span",Dn,r(i.player_name||i.nickname),1)]),t("span",Fn,r(i.score),1)],6))),128))])]),t("div",jn,[e(s).isHost?(m(),ce(e(I),{key:0,label:e(n)("game.playAgainSamePlayers"),severity:"success",class:"flex-1",loading:Ve.value,onClick:zt},null,8,["label","loading"])):(m(),ce(e(I),{key:1,label:e(n)("game.playAgain"),severity:"success",class:"flex-1",onClick:l[5]||(l[5]=i=>e(ie).visit("/spill"))},null,8,["label"])),y(e(I),{label:e(n)("game.viewArchive"),severity:"secondary",variant:"outlined",class:"flex-1",onClick:l[6]||(l[6]=i=>e(ie).visit(`/arkiv/${c.code}`))},null,8,["label"])])])])):M("",!0)],64)),me.value?(m(),v("div",Hn,[t("button",{onClick:l[7]||(l[7]=i=>J.value=!J.value),class:"w-full px-4 py-2 flex items-center justify-between text-sm text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-900 transition-colors gap-3"},[t("div",Un,[t("span",Kn,r(e(n)("game.chat")),1),X.value?(m(),v("span",{key:0,ref_key:"chatPreviewRef",ref:Fe,class:"truncate font-mono text-xs"},[X.value.system?(m(),v("span",$n,"*** "+r(X.value.message),1)):X.value.action?(m(),v(P,{key:1},[l[47]||(l[47]=t("span",{class:"text-slate-400 dark:text-slate-500"},"* ",-1)),t("span",Nn,r(X.value.nickname),1),l[48]||(l[48]=q(r(" "),-1)),t("span",Wn,r(X.value.message),1)],64)):(m(),v(P,{key:2},[l[49]||(l[49]=t("span",{class:"text-slate-400 dark:text-slate-500"},"<",-1)),t("span",Zn,r(X.value.nickname),1),l[50]||(l[50]=t("span",{class:"text-slate-400 dark:text-slate-500"},">",-1)),l[51]||(l[51]=q(r(" "),-1)),t("span",qn,r(X.value.message),1)],64))],512)):M("",!0)]),t("div",Qn,[t("span",{ref_key:"unreadBadgeRef",ref:De},[ne.value>0?(m(),ce(e(et),{key:0,value:ne.value,severity:"danger"},null,8,["value"])):M("",!0)],512),(m(),v("svg",{class:W([{"rotate-180":J.value},"w-4 h-4 transition-transform"]),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[...l[52]||(l[52]=[t("polyline",{points:"18 15 12 9 6 15"},null,-1)])],2))])]),J.value?(m(),v("div",{key:0,class:"border-t border-slate-200 dark:border-slate-800 max-h-48 flex flex-col",onClick:Et},[t("div",{ref_key:"chatContainer",ref:Y,class:"flex-1 overflow-y-auto px-3 py-1 space-y-0.5 min-h-0 font-mono text-xs"},[(m(!0),v(P,null,oe(e(s).chatMessages,(i,V)=>(m(),v("div",{key:V,class:W(["chat-line",i.system?"text-slate-400 dark:text-slate-500":i.action?"text-purple-500 dark:text-purple-400":""])},[i.system?(m(),v(P,{key:0},[l[53]||(l[53]=t("span",{class:"text-slate-500"},"*** ",-1)),t("span",null,r(i.message),1)],64)):i.action?(m(),v(P,{key:1},[l[54]||(l[54]=t("span",{class:"text-slate-500"},"* ",-1)),t("span",Jn,r(i.nickname),1),l[55]||(l[55]=q(r(" "),-1)),t("span",null,r(i.message),1)],64)):(m(),v(P,{key:2},[l[56]||(l[56]=t("span",{class:"text-slate-500"},"<",-1)),t("span",Xn,r(i.nickname),1),l[57]||(l[57]=t("span",{class:"text-slate-500"},">",-1)),l[58]||(l[58]=q(r(" "),-1)),t("span",Yn,r(i.message),1)],64))],2))),128)),e(s).chatMessages.length===0?(m(),v("p",el," --- "+r(e(n)("game.chat"))+" --- ",1)):M("",!0)],512),t("form",{onSubmit:he(Tt,["prevent"]),class:"flex gap-1 p-1.5 border-t border-slate-100 dark:border-slate-800",onClick:l[9]||(l[9]=he(()=>{},["stop"]))},[y(e(_e),{ref_key:"chatInputRef",ref:Ie,modelValue:Z.value,"onUpdate:modelValue":l[8]||(l[8]=i=>Z.value=i),placeholder:e(n)("game.sendMessage"),class:"flex-1 font-mono !text-xs",size:"small"},null,8,["modelValue","placeholder"]),y(e(I),{type:"submit",label:"Send",severity:"success",size:"small",disabled:!Z.value.trim()},null,8,["disabled"])],32)])):M("",!0)])):M("",!0)])]),_:1},8,["game-code","player-count","is-private"]),y(e(Ue),{visible:h.value,"onUpdate:visible":l[11]||(l[11]=i=>h.value=i),header:e(n)("lobby.inviteTitle"),modal:"",style:{width:"24rem"}},{default:te(()=>[t("form",{onSubmit:he(At,["prevent"]),class:"space-y-4"},[t("div",null,[t("label",tl,r(e(n)("lobby.inviteEmailLabel")),1),y(e(_e),{modelValue:w.value,"onUpdate:modelValue":l[10]||(l[10]=i=>w.value=i),type:"email",placeholder:e(n)("lobby.inviteEmailLabel"),class:"w-full",disabled:S.value<=0},null,8,["modelValue","placeholder","disabled"])]),E.value?(m(),v("p",al,r(e(n)("lobby.inviteSent")),1)):M("",!0),R.value?(m(),v("p",sl,r(R.value),1)):M("",!0),t("p",nl,r(e(n)("lobby.inviteLimit").replace("{n}",S.value)),1),y(e(I),{type:"submit",label:e(n)("lobby.inviteSend"),severity:"success",class:"w-full",loading:L.value,disabled:!w.value.trim()||S.value<=0},null,8,["label","loading","disabled"])],32)]),_:1},8,["visible","header"]),y(e(Ue),{visible:o.value,"onUpdate:visible":l[14]||(l[14]=i=>o.value=i),header:e(n)("lobby.ban"),modal:"",style:{width:"24rem"}},{default:te(()=>[t("p",ll,r(e(n)("lobby.banConfirm").replace("{name}",f.value)),1),t("div",rl,[t("label",ol,r(e(n)("lobby.banReason")),1),y(e(_e),{modelValue:b.value,"onUpdate:modelValue":l[12]||(l[12]=i=>b.value=i),placeholder:e(n)("lobby.banReason"),class:"w-full",maxlength:"200"},null,8,["modelValue","placeholder"])]),t("div",il,[y(e(I),{label:e(n)("common.cancel"),severity:"secondary",variant:"outlined",onClick:l[13]||(l[13]=i=>o.value=!1)},null,8,["label"]),y(e(I),{label:e(n)("lobby.ban"),severity:"danger",onClick:Nt},null,8,["label"])])]),_:1},8,["visible","header"]),y(e(Ue),{visible:U.value,"onUpdate:visible":l[17]||(l[17]=i=>U.value=i),header:e(n)("lobby.enterPassword"),modal:"",style:{width:"24rem"},closable:!1},{default:te(()=>[t("form",{onSubmit:he(Jt,["prevent"]),class:"space-y-4"},[t("p",dl,r(e(n)("lobby.passwordRequired")),1),K.value?(m(),v("div",cl,r(K.value),1)):M("",!0),y(e(_e),{modelValue:N.value,"onUpdate:modelValue":l[15]||(l[15]=i=>N.value=i),type:"password",placeholder:e(n)("create.password"),class:"w-full",autofocus:""},null,8,["modelValue","placeholder"]),t("div",ul,[y(e(I),{label:e(n)("common.back"),severity:"secondary",variant:"outlined",onClick:l[16]||(l[16]=i=>e(ie).visit("/spill"))},null,8,["label"]),y(e(I),{type:"submit",label:e(n)("games.join"),severity:"success",loading:Se.value,disabled:!N.value.trim()},null,8,["label","loading","disabled"])])],32)]),_:1},8,["visible","header"]),y(e(Ue),{visible:C.value,"onUpdate:visible":l[34]||(l[34]=i=>C.value=i),header:e(n)("lobby.editSettings"),modal:"",style:{width:"28rem"},class:"max-h-[90vh]"},{default:te(()=>[t("div",ml,[O.value?(m(),v("div",vl,r(O.value),1)):M("",!0),t("div",null,[t("label",fl,r(e(n)("create.rounds"))+": "+r(u.rounds),1),y(e(de),{modelValue:u.rounds,"onUpdate:modelValue":l[18]||(l[18]=i=>u.rounds=i),min:1,max:20,step:1,class:"w-full px-3"},null,8,["modelValue"])]),t("div",null,[t("label",pl,r(e(n)("create.answerTime"))+": "+r(u.answer_time)+" "+r(e(n)("create.seconds")),1),y(e(de),{modelValue:u.answer_time,"onUpdate:modelValue":l[19]||(l[19]=i=>u.answer_time=i),min:15,max:180,step:5,class:"w-full px-3"},null,8,["modelValue"])]),t("div",null,[t("label",hl,r(e(n)("create.voteTime"))+": "+r(u.vote_time)+" "+r(e(n)("create.seconds")),1),y(e(de),{modelValue:u.vote_time,"onUpdate:modelValue":l[20]||(l[20]=i=>u.vote_time=i),min:10,max:120,step:5,class:"w-full px-3"},null,8,["modelValue"])]),t("div",null,[t("label",bl,r(e(n)("create.timeBetweenRounds"))+": "+r(u.time_between_rounds)+" "+r(e(n)("create.seconds")),1),y(e(de),{modelValue:u.time_between_rounds,"onUpdate:modelValue":l[21]||(l[21]=i=>u.time_between_rounds=i),min:3,max:120,step:1,class:"w-full px-3"},null,8,["modelValue"])]),t("div",null,[t("label",yl,r(e(n)("create.acronymLength"))+": "+r(u.acronym_length),1),y(e(de),{modelValue:u.acronym_length,"onUpdate:modelValue":l[22]||(l[22]=i=>u.acronym_length=i),min:1,max:6,step:1,class:"w-full px-3"},null,8,["modelValue"])]),t("div",null,[t("label",xl,r(e(n)("create.maxPlayers"))+": "+r(u.max_players),1),y(e(de),{modelValue:u.max_players,"onUpdate:modelValue":l[23]||(l[23]=i=>u.max_players=i),min:2,max:16,step:1,class:"w-full px-3"},null,8,["modelValue"])]),t("div",null,[t("label",gl,r(e(n)("create.excludeLetters")),1),y(e(_e),{modelValue:u.excluded_letters,"onUpdate:modelValue":l[24]||(l[24]=i=>u.excluded_letters=i),class:"w-full uppercase tracking-[0.2em] font-mono",placeholder:"XZQ",onInput:l[25]||(l[25]=i=>u.excluded_letters=u.excluded_letters.toUpperCase().replace(/[^A-ZÃ†Ã˜Ã…]/g,""))},null,8,["modelValue"])]),t("div",null,[t("label",kl,r(e(n)("create.maxEditsShort"))+": "+r(u.max_edits===0?e(n)("create.unlimited"):u.max_edits),1),t("p",wl,r(e(n)("create.maxEditsDesc")),1),y(e(de),{modelValue:u.max_edits,"onUpdate:modelValue":l[26]||(l[26]=i=>u.max_edits=i),min:0,max:10,step:1,class:"w-full px-3"},null,8,["modelValue"])]),t("div",null,[t("label",_l,r(e(n)("create.maxVoteChangesShort"))+": "+r(u.max_vote_changes===0?e(n)("create.unlimited"):u.max_vote_changes),1),t("p",Cl,r(e(n)("create.maxVoteChangesDesc")),1),y(e(de),{modelValue:u.max_vote_changes,"onUpdate:modelValue":l[27]||(l[27]=i=>u.max_vote_changes=i),min:0,max:10,step:1,class:"w-full px-3"},null,8,["modelValue"])]),t("div",Ml,[t("div",null,[t("label",Ll,r(e(n)("create.readyCheck")),1),t("p",Rl,r(e(n)("create.readyCheckDesc")),1)]),y(e(vt),{modelValue:u.allow_ready_check,"onUpdate:modelValue":l[28]||(l[28]=i=>u.allow_ready_check=i),inputId:"settingsReadyCheck"},null,8,["modelValue"])]),t("div",Vl,[t("label",Sl,r(e(n)("create.chat")),1),y(e(vt),{modelValue:u.chat_enabled,"onUpdate:modelValue":l[29]||(l[29]=i=>u.chat_enabled=i),inputId:"settingsChat"},null,8,["modelValue"])]),t("div",null,[t("label",El,r(e(n)("create.visibility")),1),t("div",Tl,[y(e(I),{label:e(n)("create.public"),severity:u.is_private?"secondary":"success",variant:u.is_private?"outlined":void 0,size:"small",onClick:l[30]||(l[30]=i=>u.is_private=!1)},null,8,["label","severity","variant"]),y(e(I),{label:e(n)("create.private"),severity:u.is_private?"success":"secondary",variant:u.is_private?void 0:"outlined",size:"small",onClick:l[31]||(l[31]=i=>u.is_private=!0)},null,8,["label","severity","variant"])])]),u.is_private?(m(),v("div",Al,[t("label",Il,r(e(n)("create.password")),1),t("p",zl,r(e(n)("lobby.passwordHint")),1),y(e(_e),{modelValue:u.password,"onUpdate:modelValue":l[32]||(l[32]=i=>u.password=i),type:"text",class:"w-full"},null,8,["modelValue"])])):M("",!0)]),t("div",Bl,[y(e(I),{label:e(n)("common.cancel"),severity:"secondary",variant:"outlined",onClick:l[33]||(l[33]=i=>C.value=!1)},null,8,["label"]),y(e(I),{label:e(n)("common.save"),severity:"success",loading:H.value,onClick:Yt},null,8,["label","loading"])])]),_:1},8,["visible","header"]),y(e(Ma))],64))}}),Kl=ja(Gl,[["__scopeId","data-v-a3c1c0f6"]]);export{Kl as default};
