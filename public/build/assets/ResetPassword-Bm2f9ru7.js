import{c as i,a as d,t as a,u as e,b as c,w as V,d as P,l as j,y as C,p as x,s as E,h as N,k as O,m as w,z as b,f as n,j as B,x as M}from"./app-CCP2hVtR.js";import{s as k}from"./index-B5S8LY6B.js";import"./index-CdoIoPxA.js";const S={class:"max-w-md mx-auto px-4 py-12 sm:py-20"},U={class:"text-3xl font-bold text-center mb-8 text-slate-800 dark:text-slate-200"},A={key:0,class:"text-center"},R={class:"p-4 rounded-lg bg-emerald-50 dark:bg-emerald-950/50 border border-emerald-200 dark:border-emerald-900 text-sm text-emerald-700 dark:text-emerald-300 mb-6"},T={key:0,class:"p-3 rounded-lg bg-red-50 dark:bg-red-950/50 border border-red-200 dark:border-red-900 text-sm text-red-700 dark:text-red-300"},$={class:"flex flex-col gap-2"},z={for:"email",class:"text-sm font-medium text-slate-700 dark:text-slate-300"},D={key:0,class:"text-red-500"},I={class:"flex flex-col gap-2"},q={for:"password",class:"text-sm font-medium text-slate-700 dark:text-slate-300"},F={key:0,class:"text-red-500"},G={class:"flex flex-col gap-2"},H={for:"password_confirmation",class:"text-sm font-medium text-slate-700 dark:text-slate-300"},Q={__name:"ResetPassword",props:{token:String},setup(g){const h=g,{t:o}=O(),s=b({email:"",password:"",password_confirmation:""}),p=w(!1),u=w(""),_=w(!1),l=b({});async function v(){p.value=!0,u.value="",Object.keys(l).forEach(m=>delete l[m]);try{await B.auth.resetPassword({token:h.token,email:s.email,password:s.password,password_confirmation:s.password_confirmation}),_.value=!0,setTimeout(()=>M.visit("/logg-inn"),3e3)}catch(m){const r=m.response?.status,t=m.response?.data;r===422&&t?.errors?Object.assign(l,Object.fromEntries(Object.entries(t.errors).map(([y,f])=>[y,Array.isArray(f)?f[0]:f]))):u.value=t?.message||o("common.error")}finally{p.value=!1}}return(m,r)=>(n(),i("div",S,[d("h1",U,a(e(o)("auth.resetPassword.title")),1),_.value?(n(),i("div",A,[d("div",R,a(e(o)("auth.resetPassword.success")),1),c(e(j),{href:"/logg-inn",class:"text-emerald-600 dark:text-emerald-400 font-medium hover:underline"},{default:V(()=>[P(a(e(o)("auth.login.title")),1)]),_:1})])):(n(),i("form",{key:1,onSubmit:C(v,["prevent"]),class:"space-y-5"},[u.value?(n(),i("div",T,a(u.value),1)):x("",!0),d("div",$,[d("label",z,a(e(o)("auth.login.email")),1),c(e(E),{id:"email",modelValue:s.email,"onUpdate:modelValue":r[0]||(r[0]=t=>s.email=t),type:"email",autocomplete:"email",class:"w-full"},null,8,["modelValue"]),l.email?(n(),i("small",D,a(l.email),1)):x("",!0)]),d("div",I,[d("label",q,a(e(o)("auth.resetPassword.newPassword")),1),c(e(k),{id:"password",modelValue:s.password,"onUpdate:modelValue":r[1]||(r[1]=t=>s.password=t),toggleMask:"",invalid:!!l.password,inputClass:"w-full",class:"w-full"},null,8,["modelValue","invalid"]),l.password?(n(),i("small",F,a(l.password),1)):x("",!0)]),d("div",G,[d("label",H,a(e(o)("auth.resetPassword.confirmPassword")),1),c(e(k),{id:"password_confirmation",modelValue:s.password_confirmation,"onUpdate:modelValue":r[2]||(r[2]=t=>s.password_confirmation=t),feedback:!1,toggleMask:"",inputClass:"w-full",class:"w-full"},null,8,["modelValue"])]),c(e(N),{type:"submit",label:e(o)("auth.resetPassword.submit"),severity:"success",loading:p.value,class:"w-full"},null,8,["label","loading"])],32))]))}};export{Q as default};
